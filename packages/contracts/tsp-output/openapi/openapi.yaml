openapi: 3.0.0
info:
  title: (title)
  description: |-
    Project API - RESTful API following modern best practices

    Key Features:
    - URL versioning (/v1)
    - Multi-tenant architecture (path-based with /orgs/{orgId})
    - Comprehensive pagination with navigation links
    - Structured error responses with detailed validation
    - Soft delete support with restore capability
    - Batch operations for bulk processing
    - Field selection and relation inclusion
    - Full-text search and filtering
  version: 0.0.0
tags:
  - name: Health
  - name: Files
  - name: Roles
  - name: Context
  - name: Audit Logs
  - name: Jobs
  - name: Webhooks
  - name: Migration
  - name: ExamplePosts
  - name: ExampleComments
  - name: Notifications
  - name: Notification Preferences
  - name: Reports
  - name: Scheduled Jobs
  - name: Announcements
  - name: Subscriptions
  - name: Legal Documents (Admin)
  - name: Legal Documents (Public)
  - name: System Organizations
  - name: Backups
paths:
  /health:
    get:
      operationId: Health_check
      summary: Health check
      description: |-
        Check API health status
        Returns 200 OK if the API is healthy
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - ok
                      - degraded
                      - down
                    description: Service status
                  timestamp:
                    type: string
                    format: date-time
                    description: Current timestamp
                  version:
                    type: string
                    description: API version
                  services:
                    type: object
                    properties:
                      database:
                        type: string
                        enum:
                          - ok
                          - degraded
                          - down
                      cache:
                        type: string
                        enum:
                          - ok
                          - degraded
                          - down
                      storage:
                        type: string
                        enum:
                          - ok
                          - degraded
                          - down
                    description: Additional service information
                required:
                  - status
                  - timestamp
      tags:
        - Health
  /v1/admin/coupons:
    get:
      operationId: CouponsAdmin_list
      summary: List coupons
      description: |-
        List coupons

        Returns all coupons with optional filtering.
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: type
          in: query
          required: false
          description: Filter by coupon type
          schema:
            $ref: '#/components/schemas/CouponType'
          explode: false
        - name: isActive
          in: query
          required: false
          description: Filter by active status
          schema:
            type: boolean
          explode: false
        - name: code
          in: query
          required: false
          description: Search by code
          schema:
            type: string
          explode: false
        - name: sortBy
          in: query
          required: false
          description: Sort by field
          schema:
            type: string
            default: createdAt
          explode: false
        - name: sortOrder
          in: query
          required: false
          description: Sort order
          schema:
            type: string
            default: desc
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/CouponListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
    post:
      operationId: CouponsAdmin_create
      summary: Create coupon
      description: |-
        Create coupon

        Creates a new discount coupon.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CouponResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCouponRequest'
        description: Coupon details
  /v1/admin/coupons/{couponId}:
    get:
      operationId: CouponsAdmin_get
      summary: Get coupon
      description: |-
        Get coupon

        Returns a single coupon by ID.
      parameters:
        - name: couponId
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/CouponResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
    patch:
      operationId: CouponsAdmin_update
      summary: Update coupon
      description: |-
        Update coupon

        Updates an existing coupon.
      parameters:
        - name: couponId
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/CouponResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCouponRequest'
        description: Updated coupon details
    delete:
      operationId: CouponsAdmin_delete
      summary: Delete coupon
      description: |-
        Delete coupon

        Soft deletes a coupon (sets isActive to false).
      parameters:
        - name: couponId
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
  /v1/admin/legal-documents:
    get:
      operationId: LegalDocumentsAdmin_list
      summary: List legal documents
      description: List all legal documents
      parameters:
        - name: page
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: type
          in: query
          required: false
          description: Filter by type
          schema:
            $ref: '#/components/schemas/LegalDocumentType'
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by status
          schema:
            $ref: '#/components/schemas/LegalDocumentStatus'
          explode: false
        - name: locale
          in: query
          required: false
          description: Filter by locale
          schema:
            type: string
          explode: false
        - name: includeDeleted
          in: query
          required: false
          description: Include deleted documents
          schema:
            type: boolean
            default: false
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
    post:
      operationId: LegalDocumentsAdmin_create
      summary: Create legal document
      description: Create a new legal document with initial version
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LegalDocumentWithVersionResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLegalDocumentRequest'
        description: Document data
  /v1/admin/legal-documents/export-acceptances:
    post:
      operationId: LegalDocumentsAdmin_exportAcceptances
      summary: Export acceptances
      description: Export acceptances for compliance
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AsyncJobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExportAcceptancesRequest'
        description: Export options
  /v1/admin/legal-documents/{documentId}:
    get:
      operationId: LegalDocumentsAdmin_get
      summary: Get legal document
      description: Get a specific document by ID
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentWithVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
    patch:
      operationId: LegalDocumentsAdmin_update
      summary: Update legal document
      description: Update document metadata
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLegalDocumentRequest'
        description: Updated data
    delete:
      operationId: LegalDocumentsAdmin_delete
      summary: Archive legal document
      description: Archive (soft delete) a document
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
  /v1/admin/legal-documents/{documentId}/acceptances:
    get:
      operationId: LegalDocumentsAdmin_listAcceptances
      summary: List document acceptances
      description: Get acceptances for a document/version
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: query
          required: false
          description: Filter by version
          schema:
            type: string
          explode: false
        - name: page
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentAcceptanceListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
  /v1/admin/legal-documents/{documentId}/audit-log:
    get:
      operationId: LegalDocumentsAdmin_getAuditLog
      summary: Get document audit log
      description: Get audit log for a document
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentAuditLogListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
  /v1/admin/legal-documents/{documentId}/versions:
    get:
      operationId: LegalDocumentsAdmin_listVersions
      summary: List document versions
      description: List all versions of a document
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by status
          schema:
            $ref: '#/components/schemas/LegalDocumentStatus'
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
    post:
      operationId: LegalDocumentsAdmin_createVersion
      summary: Create document version
      description: Create a new version (as draft)
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LegalDocumentVersionResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLegalDocumentVersionRequest'
        description: Version data
  /v1/admin/legal-documents/{documentId}/versions/{versionId}:
    get:
      operationId: LegalDocumentsAdmin_getVersion
      summary: Get document version
      description: Get a specific version
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: path
          required: true
          description: Version ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
    patch:
      operationId: LegalDocumentsAdmin_updateVersion
      summary: Update document version
      description: Update a draft version
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: path
          required: true
          description: Version ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLegalDocumentVersionRequest'
        description: Updated data
  /v1/admin/legal-documents/{documentId}/versions/{versionId}/preview:
    get:
      operationId: LegalDocumentsAdmin_previewVersion
      summary: Preview document version
      description: Preview a version (render without publishing)
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: path
          required: true
          description: Version ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
  /v1/admin/legal-documents/{documentId}/versions/{versionId}/publish:
    post:
      operationId: LegalDocumentsAdmin_publishVersion
      summary: Publish document version
      description: Publish a version (makes it active, archives previous)
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: path
          required: true
          description: Version ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PublishVersionRequest'
        description: Publish options
  /v1/admin/legal-documents/{documentId}/versions/{versionId}/unpublish:
    post:
      operationId: LegalDocumentsAdmin_unpublishVersion
      summary: Unpublish document version
      description: Unpublish a version (revert to previous or no active)
      parameters:
        - name: documentId
          in: path
          required: true
          description: Document ID
          schema:
            type: string
        - name: versionId
          in: path
          required: true
          description: Version ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentVersionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Admin)
  /v1/admin/plans:
    get:
      operationId: SubscriptionPlansAdmin_list
      summary: List subscription plans
      description: |-
        List subscription plans

        Returns all plans with optional filtering.
        Admin endpoint - returns all plans including archived.
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: applicationId
          in: query
          required: false
          description: Filter by application ID
          schema:
            type: string
          explode: false
        - name: visibility
          in: query
          required: false
          description: Filter by visibility
          schema:
            $ref: '#/components/schemas/PlanVisibility'
          explode: false
        - name: isActive
          in: query
          required: false
          description: Filter by active status
          schema:
            type: boolean
          explode: false
        - name: billingPeriod
          in: query
          required: false
          description: Filter by billing period
          schema:
            $ref: '#/components/schemas/PlanBillingPeriod'
          explode: false
        - name: sortBy
          in: query
          required: false
          description: Sort by field
          schema:
            type: string
            default: sortOrder
          explode: false
        - name: sortOrder
          in: query
          required: false
          description: Sort order
          schema:
            type: string
            default: asc
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PlanListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
    post:
      operationId: SubscriptionPlansAdmin_create
      summary: Create subscription plan
      description: |-
        Create subscription plan

        Creates a new subscription plan.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlanResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePlanRequest'
        description: Plan details
  /v1/admin/plans/{planId}:
    get:
      operationId: SubscriptionPlansAdmin_get
      summary: Get subscription plan
      description: |-
        Get subscription plan

        Returns a single plan by ID.
      parameters:
        - name: planId
          in: path
          required: true
          description: Plan ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PlanResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
    patch:
      operationId: SubscriptionPlansAdmin_update
      summary: Update subscription plan
      description: |-
        Update subscription plan

        Updates an existing subscription plan.
        Warning: Changing pricing affects future billing only.
      parameters:
        - name: planId
          in: path
          required: true
          description: Plan ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PlanResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePlanRequest'
        description: Updated plan details
    delete:
      operationId: SubscriptionPlansAdmin_delete
      summary: Delete subscription plan
      description: |-
        Delete subscription plan

        Soft deletes a plan (sets visibility to archived).
        Plans with active subscriptions cannot be hard deleted.
      parameters:
        - name: planId
          in: path
          required: true
          description: Plan ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
  /v1/job-types:
    get:
      operationId: JobTypes_list
      summary: List job types
      description: |-
        List available job types

        Returns all registered job handlers with their metadata
        for building schedule configuration forms.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobTypesListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
  /v1/legal:
    get:
      operationId: LegalDocumentsPublic_listActive
      summary: List active legal documents
      description: List all active legal documents
      parameters:
        - name: locale
          in: query
          required: false
          description: Filter by locale (uses user preference if not specified)
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ActiveLegalDocumentsListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Public)
  /v1/legal/accept:
    post:
      operationId: LegalDocumentsPublic_accept
      summary: Accept legal document
      description: Accept a legal document
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/LegalDocumentAcceptanceResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Public)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AcceptLegalDocumentRequest'
        description: Acceptance data
  /v1/legal/my-acceptances:
    get:
      operationId: LegalDocumentsPublic_getMyAcceptances
      summary: Get my acceptances
      description: Get current user's acceptance history
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/MyAcceptancesResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Public)
  /v1/legal/pending:
    get:
      operationId: LegalDocumentsPublic_checkPending
      summary: Check pending acceptances
      description: Check if user has pending documents to accept
      parameters:
        - name: locale
          in: query
          required: false
          description: Locale override
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PendingAcceptancesResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Public)
  /v1/legal/{documentType}:
    get:
      operationId: LegalDocumentsPublic_getActive
      summary: Get active legal document
      description: Get the active version of a specific document type
      parameters:
        - name: documentType
          in: path
          required: true
          description: Document type
          schema:
            $ref: '#/components/schemas/LegalDocumentType'
        - name: locale
          in: query
          required: false
          description: Locale override
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ActiveLegalDocumentResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Legal Documents (Public)
  /v1/migration/status:
    get:
      operationId: Migration_getStatus
      summary: Get API version migration status
      description: |-
        Get migration status for the current API version

        Returns information about:
        - Current version status (current, deprecated, sunset)
        - Sunset date if deprecated
        - Replacement version to migrate to
        - Breaking changes and migration checklist
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MigrationStatusResponse'
      tags:
        - Migration
  /v1/notifications:
    get:
      operationId: Notifications_list
      summary: List notifications
      description: |-
        List user's notification history
        Returns notifications for the authenticated user, excluding soft-deleted ones
      parameters:
        - name: page
          in: query
          required: false
          description: 'Page number (1-indexed, default: 1)'
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100, default: 20)'
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: channel
          in: query
          required: false
          description: Filter by notification channel
          schema:
            $ref: '#/components/schemas/NotificationChannel'
          explode: false
        - name: category
          in: query
          required: false
          description: Filter by notification category
          schema:
            $ref: '#/components/schemas/NotificationCategory'
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by notification status
          schema:
            $ref: '#/components/schemas/NotificationStatus'
          explode: false
        - name: readStatus
          in: query
          required: false
          description: Filter by read status ("read" or "unread")
          schema:
            type: string
            enum:
              - read
              - unread
          explode: false
        - name: orderBy
          in: query
          required: false
          description: 'Sort order. Use "-field" for descending, "field" for ascending. Supports: sentAt, createdAt'
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/NotificationListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
  /v1/notifications/mark-all-read:
    post:
      operationId: Notifications_markAllRead
      summary: Mark all notifications as read
      description: |-
        Mark all notifications as read for the current user
        Returns the count of notifications that were marked as read
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/MarkAllReadResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
  /v1/notifications/preview-email:
    post:
      operationId: Notifications_previewEmail
      summary: Preview email template
      description: |-
        Preview an email template
        Renders the template with provided data and returns HTML/text content
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PreviewEmailResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreviewEmailRequest'
  /v1/notifications/send:
    post:
      operationId: Notifications_send
      summary: Send notification
      description: |-
        Send a notification
        Queues the notification for delivery through the specified channel
        Requires authentication. Consider adding authorization for production use.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SendNotificationResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendNotificationRequest'
  /v1/notifications/unread/count:
    get:
      operationId: Notifications_getUnreadCount
      summary: Get unread notification count
      description: |-
        Get count of unread notifications
        Returns the number of unread notifications for the current user
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UnreadCountResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
  /v1/notifications/{id}:
    get:
      operationId: Notifications_get
      summary: Get notification by ID
      description: |-
        Get a specific notification by ID
        Only returns notifications owned by the authenticated user
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/NotificationResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notifications
    delete:
      operationId: Notifications_delete
      summary: Delete notification
      description: |-
        Soft delete a notification
        Marks the notification as deleted without actually removing it
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Notifications
  /v1/notifications/{id}/read:
    patch:
      operationId: Notifications_markRead
      summary: Mark notification as read
      description: |-
        Mark a notification as read
        Updates the readAt timestamp for the notification
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Notifications
  /v1/notifications/{id}/restore:
    post:
      operationId: Notifications_restore
      summary: Restore notification
      description: |-
        Restore a soft-deleted notification
        Clears the deletedAt timestamp to restore the notification
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Notifications
  /v1/notifications/{id}/unread:
    patch:
      operationId: Notifications_markUnread
      summary: Mark notification as unread
      description: |-
        Mark a notification as unread
        Clears the readAt timestamp for the notification
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Notifications
  /v1/orgs/{orgId}/announcements:
    get:
      operationId: Announcements_list
      summary: List active announcements
      description: |-
        List active announcements for the organization
        Returns only published, non-expired announcements targeted to the user's role
        Includes user interaction data (viewed, read, dismissed, acknowledged)
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: 'Page number (1-indexed, default: 1)'
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100, default: 20)'
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: priority
          in: query
          required: false
          description: Filter by priority
          schema:
            $ref: '#/components/schemas/AnnouncementPriority'
          explode: false
        - name: scope
          in: query
          required: false
          description: Filter by scope
          schema:
            $ref: '#/components/schemas/AnnouncementScope'
          explode: false
        - name: readStatus
          in: query
          required: false
          description: Filter by read status ("read" or "unread")
          schema:
            type: string
            enum:
              - read
              - unread
          explode: false
        - name: dismissedStatus
          in: query
          required: false
          description: Filter by dismissed status ("dismissed" or "not-dismissed")
          schema:
            type: string
            enum:
              - dismissed
              - not-dismissed
          explode: false
        - name: includeExpired
          in: query
          required: false
          description: 'Include expired announcements (default: false)'
          schema:
            type: boolean
            default: false
          explode: false
        - name: includeInactive
          in: query
          required: false
          description: 'Include inactive announcements (default: false)'
          schema:
            type: boolean
            default: false
          explode: false
        - name: orderBy
          in: query
          required: false
          description: 'Sort order. Use "-field" for descending. Supports: publishAt, createdAt, priority'
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AnnouncementListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
    post:
      operationId: Announcements_create
      summary: Create announcement
      description: |-
        Create a new announcement
        Requires admin permission
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementResponse'
      tags:
        - Announcements
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAnnouncementRequest'
        description: Announcement data
  /v1/orgs/{orgId}/announcements/unread-count:
    get:
      operationId: Announcements_getUnreadCount
      summary: Get unread announcement count
      description: |-
        Get unread announcement count for current user
        Returns count of unread announcements and critical announcements needing acknowledgment
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UnreadAnnouncementsResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}:
    get:
      operationId: Announcements_get
      summary: Get announcement by ID
      description: |-
        Get a specific announcement by ID
        Includes user interaction data
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AnnouncementWithInteractionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
    patch:
      operationId: Announcements_update
      summary: Update announcement
      description: |-
        Update an announcement
        Requires admin permission or ownership
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AnnouncementResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAnnouncementRequest'
        description: Updated announcement data
    delete:
      operationId: Announcements_delete
      summary: Delete announcement
      description: |-
        Delete an announcement (soft delete)
        Requires admin permission or ownership
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}/acknowledge:
    post:
      operationId: Announcements_acknowledge
      summary: Acknowledge critical announcement
      description: |-
        Acknowledge a critical announcement
        Required for critical priority announcements
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AcknowledgeAnnouncementResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}/dismiss:
    post:
      operationId: Announcements_dismiss
      summary: Dismiss announcement
      description: |-
        Dismiss an announcement
        Hides the announcement from the user's view
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/DismissAnnouncementResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}/read:
    post:
      operationId: Announcements_markRead
      summary: Mark announcement as read
      description: |-
        Mark announcement as read
        Called when user opens/expands the announcement
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/MarkReadResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}/stats:
    get:
      operationId: Announcements_getStats
      summary: Get announcement statistics
      description: |-
        Get announcement statistics
        Returns analytics data for a specific announcement
        Requires admin permission
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AnnouncementStatsResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/announcements/{announcementId}/view:
    post:
      operationId: Announcements_markViewed
      summary: Mark announcement as viewed
      description: |-
        Mark announcement as viewed
        Automatically called when announcement is displayed to user
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: announcementId
          in: path
          required: true
          description: Announcement ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/MarkViewedResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Announcements
  /v1/orgs/{orgId}/audit-logs:
    get:
      operationId: AuditLogs_list
      summary: Query audit logs
      description: |-
        Query audit logs

        Search and filter audit events. Supports pagination.
        Results are sorted by timestamp descending (newest first).
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: eventType
          in: query
          required: false
          description: Filter by event type (e.g., "user.created", "user.*")
          schema:
            type: string
          explode: false
        - name: actorId
          in: query
          required: false
          description: Filter by actor ID
          schema:
            type: string
          explode: false
        - name: actorType
          in: query
          required: false
          description: Filter by actor type
          schema:
            $ref: '#/components/schemas/AuditActorType'
          explode: false
        - name: resourceType
          in: query
          required: false
          description: Filter by resource type (e.g., "user", "invoice")
          schema:
            type: string
          explode: false
        - name: resourceId
          in: query
          required: false
          description: Filter by resource ID
          schema:
            type: string
          explode: false
        - name: timestampAfter
          in: query
          required: false
          description: Filter events after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: timestampBefore
          in: query
          required: false
          description: Filter events before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: ipAddress
          in: query
          required: false
          description: Filter by IP address
          schema:
            type: string
          explode: false
        - name: requestId
          in: query
          required: false
          description: Filter by request ID
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AuditLogListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Audit Logs
  /v1/orgs/{orgId}/audit-logs/export:
    post:
      operationId: AuditLogs_export
      summary: Export audit logs
      description: |-
        Export audit logs

        Returns a download URL for audit logs in CSV or JSON format.
        For large exports, returns 202 Accepted with a job ID.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          downloadUrl:
                            type: string
                            description: Download URL (signed, expires in 1 hour)
                          eventCount:
                            type: integer
                            format: int32
                            description: Number of events exported
                          expiresAt:
                            type: string
                            format: date-time
                            description: When the URL expires
                        required:
                          - downloadUrl
                          - eventCount
                          - expiresAt
                      meta:
                        $ref: '#/components/schemas/ResponseMeta'
                    required:
                      - data
                      - meta
                  - $ref: '#/components/schemas/ErrorResponse'
        '202':
          description: The request has been accepted for processing, but processing has not yet completed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AsyncJobResponse'
      tags:
        - Audit Logs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  type: string
                  enum:
                    - csv
                    - json
                  description: Export format
                timestampAfter:
                  type: string
                  format: date-time
                  description: Filter events after this timestamp
                timestampBefore:
                  type: string
                  format: date-time
                  description: Filter events before this timestamp
                eventTypes:
                  type: array
                  items:
                    type: string
                  description: Event types to include (empty = all)
              required:
                - format
        description: Export configuration
  /v1/orgs/{orgId}/audit-logs/{eventId}:
    get:
      operationId: AuditLogs_get
      summary: Get audit log entry
      description: Get a single audit log entry
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: eventId
          in: path
          required: true
          description: Event ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AuditLogResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Audit Logs
  /v1/orgs/{orgId}/backups:
    post:
      operationId: Backups_create
      summary: Create backup
      description: |-
        Create a new backup

        Initiates an async backup job for the organization.
        Returns 202 Accepted with the backup record.
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '202':
          description: The request has been accepted for processing, but processing has not yet completed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupResponse'
      tags:
        - Backups
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBackupRequest'
    get:
      operationId: Backups_list
      summary: List backups
      description: |-
        List backups

        Returns paginated list of backups for the organization.
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: status
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/BackupStatus'
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/BackupListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Backups
  /v1/orgs/{orgId}/backups/{id}:
    get:
      operationId: Backups_get
      summary: Get backup
      description: Get backup details
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/BackupResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Backups
    delete:
      operationId: Backups_delete
      summary: Delete backup
      description: Delete a backup
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Backups
  /v1/orgs/{orgId}/backups/{id}/download:
    get:
      operationId: Backups_download
      summary: Download backup
      description: Download backup file
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '302':
          description: Redirection
          headers:
            location:
              required: true
              schema:
                type: string
      tags:
        - Backups
  /v1/orgs/{orgId}/backups/{id}/restore:
    post:
      operationId: Backups_restore
      summary: Restore backup
      description: |-
        Restore from backup

        Initiates an async restore job from the specified backup.
      parameters:
        - name: orgId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '202':
          description: The request has been accepted for processing, but processing has not yet completed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupResponse'
      tags:
        - Backups
  /v1/orgs/{orgId}/example-posts:
    get:
      operationId: ExamplePosts_list
      summary: List example posts
      description: |-
        List posts in an organization
        Supports pagination, filtering, sorting, and field selection
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order (e.g., "-createdAt,title" for desc createdAt, then asc title)
          schema:
            type: string
          explode: false
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return (e.g., "id,title,status")
          schema:
            type: string
          explode: false
        - name: include
          in: query
          required: false
          description: Comma-separated list of relations to include (e.g., "comments")
          schema:
            type: string
          explode: false
        - name: search
          in: query
          required: false
          description: Full-text search query
          schema:
            type: string
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by post status (exact match)
          schema:
            $ref: '#/components/schemas/ExamplePostStatus'
          explode: false
        - name: statusNe
          in: query
          required: false
          description: Filter by status NOT equal to value
          schema:
            type: string
          explode: false
        - name: statusIn
          in: query
          required: false
          description: Filter by status IN list (comma-separated values)
          schema:
            type: string
          explode: false
        - name: authorId
          in: query
          required: false
          description: Filter by author ID
          schema:
            type: string
          explode: false
        - name: titleContains
          in: query
          required: false
          description: Filter by title contains
          schema:
            type: string
          explode: false
        - name: contentContains
          in: query
          required: false
          description: Filter by content contains
          schema:
            type: string
          explode: false
        - name: createdAfter
          in: query
          required: false
          description: Filter posts created after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: createdBefore
          in: query
          required: false
          description: Filter posts created before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: publishedAfter
          in: query
          required: false
          description: Filter posts published after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: publishedBefore
          in: query
          required: false
          description: Filter posts published before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
    post:
      operationId: ExamplePosts_create
      summary: Create example post
      description: Create a new post
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExamplePostResponse'
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExamplePostRequest'
        description: Post creation data
  /v1/orgs/{orgId}/example-posts/batch:
    post:
      operationId: ExamplePosts_batchCreate
      summary: Batch create example posts
      description: Batch create posts
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                type: object
                required:
                  - results
                  - summary
                  - meta
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      required:
                        - index
                        - status
                      properties:
                        index:
                          type: integer
                          format: int32
                          description: Index of the item in the original request array
                        status:
                          type: string
                          enum:
                            - success
                            - error
                            - skipped
                          description: Status of the operation for this item
                        data:
                          allOf:
                            - $ref: '#/components/schemas/ExamplePost'
                          description: The created/updated data (present if status is success)
                        error:
                          type: object
                          properties:
                            code:
                              type: string
                              description: Error code
                            message:
                              type: string
                              description: Error message
                          required:
                            - code
                            - message
                          description: Error details (present if status is error)
                        input:
                          type: object
                          additionalProperties: {}
                          description: Original input (included for failed items to help with retry/debugging)
                      description: Result of a single item in a batch operation
                    description: Results for each item in the batch
                  summary:
                    allOf:
                      - $ref: '#/components/schemas/BatchSummary'
                    description: Summary of operation results
                  meta:
                    allOf:
                      - $ref: '#/components/schemas/ResponseMeta'
                    description: Response metadata
                description: |-
                  Generic batch response envelope

                  Uses results array with status field for each item, matching documentation
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/CreateExamplePostRequest'
                options:
                  $ref: '#/components/schemas/BatchOptions'
              required:
                - items
        description: Batch create request
    patch:
      operationId: ExamplePosts_batchUpdate
      summary: Batch update example posts
      description: Batch update posts
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    required:
                      - results
                      - summary
                      - meta
                    properties:
                      results:
                        type: array
                        items:
                          type: object
                          required:
                            - index
                            - status
                          properties:
                            index:
                              type: integer
                              format: int32
                              description: Index of the item in the original request array
                            status:
                              type: string
                              enum:
                                - success
                                - error
                                - skipped
                              description: Status of the operation for this item
                            data:
                              allOf:
                                - $ref: '#/components/schemas/ExamplePost'
                              description: The created/updated data (present if status is success)
                            error:
                              type: object
                              properties:
                                code:
                                  type: string
                                  description: Error code
                                message:
                                  type: string
                                  description: Error message
                              required:
                                - code
                                - message
                              description: Error details (present if status is error)
                            input:
                              type: object
                              additionalProperties: {}
                              description: Original input (included for failed items to help with retry/debugging)
                          description: Result of a single item in a batch operation
                        description: Results for each item in the batch
                      summary:
                        allOf:
                          - $ref: '#/components/schemas/BatchSummary'
                        description: Summary of operation results
                      meta:
                        allOf:
                          - $ref: '#/components/schemas/ResponseMeta'
                        description: Response metadata
                    description: |-
                      Generic batch response envelope

                      Uses results array with status field for each item, matching documentation
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      updates:
                        $ref: '#/components/schemas/UpdateExamplePostRequest'
                    required:
                      - id
                      - updates
                options:
                  $ref: '#/components/schemas/BatchOptions'
        description: Batch update request
  /v1/orgs/{orgId}/example-posts/batch/restore:
    post:
      operationId: ExamplePosts_batchRestore
      summary: Batch restore example posts
      description: Batch restore soft-deleted posts
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    required:
                      - results
                      - summary
                      - meta
                    properties:
                      results:
                        type: array
                        items:
                          type: object
                          required:
                            - index
                            - status
                          properties:
                            index:
                              type: integer
                              format: int32
                              description: Index of the item in the original request array
                            status:
                              type: string
                              enum:
                                - success
                                - error
                                - skipped
                              description: Status of the operation for this item
                            data:
                              allOf:
                                - $ref: '#/components/schemas/ExamplePost'
                              description: The created/updated data (present if status is success)
                            error:
                              type: object
                              properties:
                                code:
                                  type: string
                                  description: Error code
                                message:
                                  type: string
                                  description: Error message
                              required:
                                - code
                                - message
                              description: Error details (present if status is error)
                            input:
                              type: object
                              additionalProperties: {}
                              description: Original input (included for failed items to help with retry/debugging)
                          description: Result of a single item in a batch operation
                        description: Results for each item in the batch
                      summary:
                        allOf:
                          - $ref: '#/components/schemas/BatchSummary'
                        description: Summary of operation results
                      meta:
                        allOf:
                          - $ref: '#/components/schemas/ResponseMeta'
                        description: Response metadata
                    description: |-
                      Generic batch response envelope

                      Uses results array with status field for each item, matching documentation
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  items:
                    type: string
                options:
                  $ref: '#/components/schemas/BatchOptions'
              required:
                - ids
        description: Post IDs to restore
  /v1/orgs/{orgId}/example-posts/batch/soft-delete:
    post:
      operationId: ExamplePosts_batchSoftDelete
      summary: Batch soft delete example posts
      description: Batch soft delete posts
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/BatchDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  items:
                    type: string
                options:
                  $ref: '#/components/schemas/BatchOptions'
              required:
                - ids
        description: Post IDs to soft delete
  /v1/orgs/{orgId}/example-posts/cursor:
    get:
      operationId: ExamplePosts_listCursor
      summary: List example posts (cursor-based)
      description: |-
        List posts using cursor-based pagination

        Best for large datasets (>100K records) or real-time data where
        consistent ordering is critical. Use page-based pagination for
        typical UI scenarios with page numbers.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          description: Cursor for fetching next page (post ID from previous response)
          schema:
            type: string
          explode: false
        - name: limit
          in: query
          required: false
          description: 'Maximum items to return (max: 100, default: 50)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order (e.g., "-createdAt" for desc, "createdAt" for asc)
          schema:
            type: string
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by post status
          schema:
            $ref: '#/components/schemas/ExamplePostStatus'
          explode: false
        - name: authorId
          in: query
          required: false
          description: Filter by author ID
          schema:
            type: string
          explode: false
        - name: search
          in: query
          required: false
          description: Full-text search query
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostCursorListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
  /v1/orgs/{orgId}/example-posts/deleted:
    get:
      operationId: ExamplePosts_listDeleted
      summary: List deleted example posts
      description: List soft-deleted posts
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page (max 100)
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
  /v1/orgs/{orgId}/example-posts/{id}:
    get:
      operationId: ExamplePosts_get
      summary: Get example post
      description: Get a single post by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Post ID
          schema:
            type: string
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return
          schema:
            type: string
          explode: false
        - name: include
          in: query
          required: false
          description: Comma-separated list of relations to include
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
    patch:
      operationId: ExamplePosts_update
      summary: Update example post
      description: Update a post (partial update)
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateExamplePostRequest'
        description: Post update data
    delete:
      operationId: ExamplePosts_delete
      summary: Soft delete example post
      description: |-
        Soft delete a post (default delete behavior)
        Post is marked as deleted but can be restored
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
  /v1/orgs/{orgId}/example-posts/{id}/permanent:
    delete:
      operationId: ExamplePosts_deletePermanent
      summary: Permanently delete example post
      description: |-
        Permanently delete a post (hard delete)
        Post is permanently removed and cannot be restored
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - ExamplePosts
  /v1/orgs/{orgId}/example-posts/{id}/restore:
    post:
      operationId: ExamplePosts_restore
      summary: Restore example post
      description: Restore a soft-deleted post
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExamplePostResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExamplePosts
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments:
    get:
      operationId: ExampleComments_list
      summary: List comments for a post
      description: |-
        List comments for a post
        Supports pagination, filtering, and sorting
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order (e.g., "-createdAt" for newest first)
          schema:
            type: string
          explode: false
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return
          schema:
            type: string
          explode: false
        - name: authorId
          in: query
          required: false
          description: Filter by author ID
          schema:
            type: string
          explode: false
        - name: contentContains
          in: query
          required: false
          description: Filter by content contains
          schema:
            type: string
          explode: false
        - name: createdAfter
          in: query
          required: false
          description: Filter comments created after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: createdBefore
          in: query
          required: false
          description: Filter comments created before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExampleCommentListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
    post:
      operationId: ExampleComments_create
      summary: Create comment on post
      description: Create a new comment on a post
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExampleCommentResponse'
      tags:
        - ExampleComments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExampleCommentRequest'
        description: Comment creation data
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments/batch:
    post:
      operationId: ExampleComments_batchCreate
      summary: Batch create comments
      description: Batch create comments
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                type: object
                required:
                  - results
                  - summary
                  - meta
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      required:
                        - index
                        - status
                      properties:
                        index:
                          type: integer
                          format: int32
                          description: Index of the item in the original request array
                        status:
                          type: string
                          enum:
                            - success
                            - error
                            - skipped
                          description: Status of the operation for this item
                        data:
                          allOf:
                            - $ref: '#/components/schemas/ExampleComment'
                          description: The created/updated data (present if status is success)
                        error:
                          type: object
                          properties:
                            code:
                              type: string
                              description: Error code
                            message:
                              type: string
                              description: Error message
                          required:
                            - code
                            - message
                          description: Error details (present if status is error)
                        input:
                          type: object
                          additionalProperties: {}
                          description: Original input (included for failed items to help with retry/debugging)
                      description: Result of a single item in a batch operation
                    description: Results for each item in the batch
                  summary:
                    allOf:
                      - $ref: '#/components/schemas/BatchSummary'
                    description: Summary of operation results
                  meta:
                    allOf:
                      - $ref: '#/components/schemas/ResponseMeta'
                    description: Response metadata
                description: |-
                  Generic batch response envelope

                  Uses results array with status field for each item, matching documentation
      tags:
        - ExampleComments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: '#/components/schemas/CreateExampleCommentRequest'
                options:
                  $ref: '#/components/schemas/BatchOptions'
              required:
                - items
        description: Batch create request
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments/batch/soft-delete:
    post:
      operationId: ExampleComments_batchSoftDelete
      summary: Batch soft delete comments
      description: Batch soft delete comments
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/BatchDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  items:
                    type: string
                options:
                  $ref: '#/components/schemas/BatchOptions'
              required:
                - ids
        description: Comment IDs to soft delete
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments/{id}:
    get:
      operationId: ExampleComments_get
      summary: Get comment
      description: Get a single comment by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExampleCommentResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
    patch:
      operationId: ExampleComments_update
      summary: Update comment
      description: Update a comment (partial update)
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExampleCommentResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateExampleCommentRequest'
        description: Comment update data
    delete:
      operationId: ExampleComments_delete
      summary: Soft delete comment
      description: Soft delete a comment
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments/{id}/permanent:
    delete:
      operationId: ExampleComments_deletePermanent
      summary: Permanently delete comment
      description: Permanently delete a comment (hard delete)
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - ExampleComments
  /v1/orgs/{orgId}/example-posts/{postId}/example-comments/{id}/restore:
    post:
      operationId: ExampleComments_restore
      summary: Restore comment
      description: Restore a soft-deleted comment
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: postId
          in: path
          required: true
          description: Parent post ID
          schema:
            type: string
        - name: id
          in: path
          required: true
          description: Comment ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ExampleCommentResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - ExampleComments
  /v1/orgs/{orgId}/files:
    get:
      operationId: Files_list
      summary: List files
      description: |-
        List files in an organization

        Returns paginated list of files with optional filtering.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order (e.g., "-uploadedAt,filename")
          schema:
            type: string
          explode: false
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return
          schema:
            type: string
          explode: false
        - name: mimeType
          in: query
          required: false
          description: Filter by MIME type
          schema:
            type: string
          explode: false
        - name: kind
          in: query
          required: false
          description: Filter by file kind
          schema:
            $ref: '#/components/schemas/FileKind'
          explode: false
        - name: virusScanStatus
          in: query
          required: false
          description: Filter by virus scan status
          schema:
            $ref: '#/components/schemas/VirusScanStatus'
          explode: false
        - name: access
          in: query
          required: false
          description: Filter by access level
          schema:
            $ref: '#/components/schemas/FileAccess'
          explode: false
        - name: uploadedAfter
          in: query
          required: false
          description: Filter files uploaded after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: uploadedBefore
          in: query
          required: false
          description: Filter files uploaded before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: uploadedBy
          in: query
          required: false
          description: Filter by uploader user ID
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/FileListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Files
    post:
      operationId: Files_directUpload
      summary: Direct file upload
      description: |-
        Direct file upload (multipart/form-data)

        For simple uploads of small files (< 10 MB).
        File is uploaded directly to the API server.

        Note: For larger files or high volume, use presigned URL upload.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileResponse'
      tags:
        - Files
  /v1/orgs/{orgId}/files/uploads:
    post:
      operationId: Files_initiateUpload
      summary: Initiate presigned URL upload
      description: |-
        Initiate a presigned URL upload

        Returns a presigned URL for direct upload to storage (S3/R2/GCS).
        Client uploads directly to storage, then confirms with the API.

        Flow:
        1. POST /files/uploads - Get presigned URL
        2. PUT {presignedUrl} - Upload directly to storage
        3. POST /files/uploads/{uploadId}/confirm - Confirm upload
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/InitiateUploadResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Files
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitiateUploadRequest'
        description: Upload request with file metadata
  /v1/orgs/{orgId}/files/uploads/{uploadId}/confirm:
    post:
      operationId: Files_confirmUpload
      summary: Confirm presigned URL upload
      description: |-
        Confirm a presigned URL upload

        Called after client successfully uploads to the presigned URL.
        Triggers virus scanning and creates the file record.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: uploadId
          in: path
          required: true
          description: Upload ID from initiate response
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FileResponse'
      tags:
        - Files
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmUploadRequest'
        description: Confirmation data
  /v1/orgs/{orgId}/files/{fileId}:
    get:
      operationId: Files_get
      summary: Get file
      description: |-
        Get a single file by ID

        Returns file metadata including a fresh signed URL for download.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          description: File ID
          schema:
            type: string
        - name: fields
          in: query
          required: false
          description: Comma-separated list of fields to return
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/FileResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Files
    patch:
      operationId: Files_update
      summary: Update file
      description: |-
        Update file properties

        Currently supports changing the access level (private/public).
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          description: File ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/FileResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Files
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFileRequest'
        description: Update request
    delete:
      operationId: Files_delete
      summary: Delete file
      description: |-
        Delete a file (soft delete)

        File is marked as deleted but retained for audit purposes.
        Storage is cleaned up after retention period.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          description: File ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/FileDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Files
  /v1/orgs/{orgId}/files/{fileId}/download:
    get:
      operationId: Files_download
      summary: Download file
      description: |-
        Download a file

        Returns a redirect to a signed URL for the file.
        The signed URL expires in 5 minutes.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          description: File ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '302':
          description: Redirection
          headers:
            location:
              required: true
              schema:
                type: string
      tags:
        - Files
  /v1/orgs/{orgId}/files/{fileId}/permanent:
    delete:
      operationId: Files_deletePermanent
      summary: Permanently delete file
      description: |-
        Permanently delete a file (hard delete)

        Immediately removes file from storage.
        Use with caution - cannot be undone.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: fileId
          in: path
          required: true
          description: File ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Files
  /v1/orgs/{orgId}/jobs:
    get:
      operationId: Jobs_list
      summary: List jobs
      description: |-
        List async jobs

        Returns jobs for the current tenant with optional filtering.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by job status
          schema:
            $ref: '#/components/schemas/JobStatus'
          explode: false
        - name: type
          in: query
          required: false
          description: Filter by job type (e.g., "report", "import")
          schema:
            type: string
          explode: false
        - name: format
          in: query
          required: false
          description: Filter by format (for report jobs)
          schema:
            type: string
          explode: false
        - name: templateId
          in: query
          required: false
          description: Filter by template ID (for report jobs)
          schema:
            type: string
          explode: false
        - name: createdAfter
          in: query
          required: false
          description: Filter jobs created after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
        - name: createdBefore
          in: query
          required: false
          description: Filter jobs created before this timestamp
          schema:
            type: string
            format: date-time
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
    post:
      operationId: Jobs_create
      summary: Create job
      description: |-
        Create a new job

        Creates and enqueues a job for async processing.
        The job type must have a registered handler.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateJobRequest'
        description: Job creation request
  /v1/orgs/{orgId}/jobs/{jobId}:
    get:
      operationId: Jobs_get
      summary: Get job status
      description: |-
        Get job status

        Poll this endpoint to check progress of async operations.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: jobId
          in: path
          required: true
          description: Job ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
  /v1/orgs/{orgId}/jobs/{jobId}/cancel:
    post:
      operationId: Jobs_cancel
      summary: Cancel job
      description: |-
        Cancel a job

        Only pending or processing jobs can be cancelled.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: jobId
          in: path
          required: true
          description: Job ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
  /v1/orgs/{orgId}/jobs/{jobId}/download:
    get:
      operationId: Jobs_download
      summary: Download job result
      description: |-
        Download job result

        Downloads the file generated by a completed job (e.g., report exports).
        Only available for jobs that produce downloadable files.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: jobId
          in: path
          required: true
          description: Job ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
  /v1/orgs/{orgId}/jobs/{jobId}/retry:
    post:
      operationId: Jobs_retry
      summary: Retry job
      description: |-
        Retry a failed job

        Creates a new job with the same parameters as the failed job.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: jobId
          in: path
          required: true
          description: Job ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Jobs
  /v1/orgs/{orgId}/reports/export:
    post:
      operationId: ReportExports_export
      summary: Export data
      description: |-
        Export data synchronously

        For small datasets (<10,000 rows). Returns the file directly.
        For larger datasets, use async=true to get a job ID.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          headers:
            content-disposition:
              required: true
              schema:
                type: string
          content:
            '*/*':
              schema:
                type: string
                format: binary
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/AsyncExportResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExportRequest'
        description: Export request
  /v1/orgs/{orgId}/reports/export/preview:
    post:
      operationId: ReportExports_previewExport
      summary: Preview export
      description: |-
        Preview export (first N rows)

        Useful for testing templates and verifying data before full export.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          rows:
                            type: array
                            items: {}
                            description: Preview rows
                          totalCount:
                            type: integer
                            format: int32
                            description: Total row count (if known)
                          columns:
                            type: array
                            items:
                              type: string
                            description: Column headers
                        required:
                          - rows
                          - columns
                      meta:
                        $ref: '#/components/schemas/ResponseMeta'
                    required:
                      - data
                      - meta
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                templateId:
                  type: string
                  description: Report template ID (optional, for template-based exports)
                format:
                  allOf:
                    - $ref: '#/components/schemas/ReportFormat'
                  description: Output format (required if no templateId)
                data:
                  type: array
                  items: {}
                  description: Data to export (for client-side data)
                columns:
                  type: array
                  items:
                    $ref: '#/components/schemas/ReportColumnConfig'
                  description: Column definitions (required if no templateId)
                options:
                  allOf:
                    - $ref: '#/components/schemas/ReportOptions'
                  description: Format-specific options
                filters:
                  type: object
                  additionalProperties: {}
                  description: Filters to apply to data source
                sort:
                  type: array
                  items:
                    type: object
                    properties:
                      field:
                        type: string
                      direction:
                        type: string
                        enum:
                          - asc
                          - desc
                    required:
                      - field
                      - direction
                  description: Sort configuration
                parameters:
                  type: object
                  additionalProperties: {}
                  description: Additional parameters for template
                selectedIds:
                  type: array
                  items:
                    type: string
                  description: Export only selected rows (by ID)
                async:
                  type: boolean
                  description: Use async processing (returns job ID)
                limit:
                  type: integer
                  format: int32
                  description: 'Maximum rows to preview (default: 10, max: 100)'
        description: Export request with limit
  /v1/orgs/{orgId}/reports/export/stream:
    post:
      operationId: ReportExports_streamExport
      summary: Stream export data
      description: |-
        Export data as streaming response

        For large datasets. Streams data in chunks as it's generated.
        Only supports CSV and Excel formats.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          headers:
            content-disposition:
              required: true
              schema:
                type: string
            transfer-encoding:
              required: true
              schema:
                type: string
                enum:
                  - chunked
          content:
            '*/*':
              schema:
                type: string
                format: binary
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StreamExportRequest'
        description: Stream export request
  /v1/orgs/{orgId}/reports/templates:
    get:
      operationId: ReportTemplates_list
      summary: List report templates
      description: List report templates in an organization
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: 'Number of items per page (max: 100)'
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order (e.g., "-createdAt,name")
          schema:
            type: string
          explode: false
        - name: format
          in: query
          required: false
          description: Filter by format
          schema:
            $ref: '#/components/schemas/ReportFormat'
          explode: false
        - name: isPublic
          in: query
          required: false
          description: Filter by public templates only
          schema:
            type: boolean
          explode: false
        - name: search
          in: query
          required: false
          description: Full-text search in name and description
          schema:
            type: string
          explode: false
        - name: createdBy
          in: query
          required: false
          description: Filter templates created by specific user
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ReportTemplateListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
    post:
      operationId: ReportTemplates_create
      summary: Create report template
      description: Create a new report template
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportTemplateResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReportTemplateRequest'
        description: Template data
  /v1/orgs/{orgId}/reports/templates/{templateId}:
    get:
      operationId: ReportTemplates_get
      summary: Get report template
      description: Get a report template by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: templateId
          in: path
          required: true
          description: Template ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ReportTemplateResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
    patch:
      operationId: ReportTemplates_update
      summary: Update report template
      description: Update a report template
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: templateId
          in: path
          required: true
          description: Template ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ReportTemplateResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReportTemplateRequest'
        description: Template update data
    delete:
      operationId: ReportTemplates_delete
      summary: Delete report template
      description: Delete a report template
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: templateId
          in: path
          required: true
          description: Template ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Reports
  /v1/orgs/{orgId}/reports/templates/{templateId}/clone:
    post:
      operationId: ReportTemplates_clone
      summary: Clone report template
      description: Clone a report template
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: templateId
          in: path
          required: true
          description: Template ID to clone
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReportTemplateResponse'
      tags:
        - Reports
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
              required:
                - name
        description: New template name
  /v1/orgs/{orgId}/roles:
    get:
      operationId: TenantRoles_list
      summary: List tenant roles
      description: |-
        List all roles in a tenant

        Returns both system roles and custom roles for this tenant.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: isSystemRole
          in: query
          required: false
          description: Filter by system role status
          schema:
            type: boolean
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
    post:
      operationId: TenantRoles_create
      summary: Create tenant role
      description: |-
        Create a tenant-scoped role

        Creates a custom role for this specific tenant.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleResponse'
      tags:
        - Roles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRoleRequest'
        description: Role data
  /v1/orgs/{orgId}/roles/{roleId}:
    get:
      operationId: TenantRoles_get
      summary: Get role
      description: Get a role by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
    patch:
      operationId: TenantRoles_update
      summary: Update role
      description: |-
        Update a role

        System roles cannot be renamed but their permissions can be modified.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRoleRequest'
        description: Role update data
    delete:
      operationId: TenantRoles_delete
      summary: Delete role
      description: |-
        Delete a role

        System roles cannot be deleted.
        Fails if role is assigned to any users.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Roles
  /v1/orgs/{orgId}/schedules:
    get:
      operationId: ScheduledJobs_list
      summary: List scheduled jobs
      description: |-
        List scheduled jobs

        Returns scheduled jobs for the current tenant with optional filtering.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: orderBy
          in: query
          required: false
          description: Sort order
          schema:
            type: string
          explode: false
        - name: jobType
          in: query
          required: false
          description: Filter by job type
          schema:
            type: string
          explode: false
        - name: frequency
          in: query
          required: false
          description: Filter by frequency
          schema:
            $ref: '#/components/schemas/ScheduleFrequency'
          explode: false
        - name: deliveryMethod
          in: query
          required: false
          description: Filter by delivery method
          schema:
            $ref: '#/components/schemas/JobDeliveryMethod'
          explode: false
        - name: isActive
          in: query
          required: false
          description: Filter by active status
          schema:
            type: boolean
          explode: false
        - name: search
          in: query
          required: false
          description: Full-text search
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
    post:
      operationId: ScheduledJobs_create
      summary: Create scheduled job
      description: Create a new scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          headers:
            location:
              required: true
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ScheduledJobResponse'
      tags:
        - Scheduled Jobs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateScheduledJobRequest'
        description: Schedule data
  /v1/orgs/{orgId}/schedules/{scheduleId}:
    get:
      operationId: ScheduledJobs_get
      summary: Get scheduled job
      description: Get a scheduled job by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
    patch:
      operationId: ScheduledJobs_update
      summary: Update scheduled job
      description: Update a scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateScheduledJobRequest'
        description: Schedule update data
    delete:
      operationId: ScheduledJobs_delete
      summary: Delete scheduled job
      description: Delete a scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SoftDeleteResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
  /v1/orgs/{orgId}/schedules/{scheduleId}/history:
    get:
      operationId: ScheduledJobs_getHistory
      summary: Get scheduled job history
      description: Get run history for a scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
        - name: limit
          in: query
          required: false
          description: Number of history items to return
          schema:
            type: integer
            format: int32
            default: 10
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobHistoryResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
  /v1/orgs/{orgId}/schedules/{scheduleId}/pause:
    post:
      operationId: ScheduledJobs_pause
      summary: Pause scheduled job
      description: Pause a scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
  /v1/orgs/{orgId}/schedules/{scheduleId}/resume:
    post:
      operationId: ScheduledJobs_resume
      summary: Resume scheduled job
      description: Resume a paused scheduled job
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ScheduledJobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
  /v1/orgs/{orgId}/schedules/{scheduleId}/run:
    post:
      operationId: ScheduledJobs_runNow
      summary: Run scheduled job now
      description: Trigger a scheduled job to run immediately
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: scheduleId
          in: path
          required: true
          description: Schedule ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/JobResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Scheduled Jobs
  /v1/orgs/{orgId}/subscriptions:
    post:
      operationId: Subscriptions_create
      summary: Create subscription
      description: |-
        Create subscription

        Creates a new subscription for the organization.
        Starts trial if configured, otherwise requires payment.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSubscriptionResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSubscriptionRequest'
        description: Subscription details
  /v1/orgs/{orgId}/subscriptions/current:
    get:
      operationId: Subscriptions_getCurrent
      summary: Get current subscription
      description: |-
        Get current subscription

        Returns the active subscription for the organization and application.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: applicationId
          in: query
          required: true
          description: Application ID
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SubscriptionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
  /v1/orgs/{orgId}/subscriptions/validate-coupon:
    post:
      operationId: Subscriptions_validateCoupon
      summary: Validate coupon
      description: |-
        Validate coupon

        Check if a coupon code is valid for a plan.
        Does not apply the coupon.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ValidateCouponResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateCouponRequest'
        description: Coupon validation details
  /v1/orgs/{orgId}/subscriptions/{subscriptionId}:
    patch:
      operationId: Subscriptions_update
      summary: Update subscription
      description: |-
        Update subscription

        Update subscription (change plan, update settings).
        Plan changes may be immediate or scheduled for period end.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: subscriptionId
          in: path
          required: true
          description: Subscription ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SubscriptionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSubscriptionRequest'
        description: Update details
  /v1/orgs/{orgId}/subscriptions/{subscriptionId}/cancel:
    post:
      operationId: Subscriptions_cancel
      summary: Cancel subscription
      description: |-
        Cancel subscription

        Cancel the subscription.
        By default, access continues until period end.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: subscriptionId
          in: path
          required: true
          description: Subscription ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SubscriptionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelSubscriptionRequest'
        description: Cancellation options
  /v1/orgs/{orgId}/subscriptions/{subscriptionId}/coupon:
    post:
      operationId: Subscriptions_applyCoupon
      summary: Apply coupon
      description: |-
        Apply coupon

        Apply a discount coupon to the subscription.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: subscriptionId
          in: path
          required: true
          description: Subscription ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SubscriptionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplyCouponRequest'
        description: Coupon details
  /v1/orgs/{orgId}/subscriptions/{subscriptionId}/resume:
    post:
      operationId: Subscriptions_resume
      summary: Resume subscription
      description: |-
        Resume subscription

        Reactivate a canceled subscription before it expires.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: subscriptionId
          in: path
          required: true
          description: Subscription ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SubscriptionResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
  /v1/orgs/{orgId}/users/{userId}/permissions:
    get:
      operationId: UserPermissions_get
      summary: Get user effective permissions
      description: |-
        Get user's effective permissions in this tenant

        Returns all roles (global + tenant) and the combined effective permissions
        after applying deny-override resolution.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UserEffectivePermissionsResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
  /v1/orgs/{orgId}/users/{userId}/roles:
    get:
      operationId: UserTenantRoles_list
      summary: List user roles in tenant
      description: |-
        List roles assigned to a user in this tenant

        Returns both global and tenant-specific role assignments.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UserRoleAssignmentListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
    post:
      operationId: UserTenantRoles_assign
      summary: Assign role to user
      description: Assign a role to a user in this tenant
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRoleAssignmentResponse'
      tags:
        - Roles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRoleRequest'
        description: Role assignment
  /v1/orgs/{orgId}/users/{userId}/roles/{roleId}:
    delete:
      operationId: UserTenantRoles_remove
      summary: Remove role from user
      description: Remove a role from a user
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
        - name: roleId
          in: path
          required: true
          description: Role ID to remove
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Roles
  /v1/orgs/{orgId}/webhooks:
    get:
      operationId: Webhooks_list
      summary: List webhooks
      description: List all webhooks in an organization
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: isActive
          in: query
          required: false
          description: Filter by active status
          schema:
            type: boolean
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
    post:
      operationId: Webhooks_create
      summary: Create webhook
      description: |-
        Create a new webhook

        The secret is only returned once in the response.
        Store it securely for signature verification.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookCreatedResponse'
      tags:
        - Webhooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebhookRequest'
        description: Webhook configuration
  /v1/orgs/{orgId}/webhooks/event-types:
    get:
      operationId: Webhooks_listEventTypes
      summary: List event types
      description: |-
        Get available event types

        Returns all event types that can be subscribed to.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookEventTypesResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}:
    get:
      operationId: Webhooks_get
      summary: Get webhook
      description: Get a webhook by ID
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
    patch:
      operationId: Webhooks_update
      summary: Update webhook
      description: Update a webhook
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWebhookRequest'
        description: Update data
    delete:
      operationId: Webhooks_delete
      summary: Delete webhook
      description: Delete a webhook
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}/deliveries:
    get:
      operationId: Webhooks_listDeliveries
      summary: List webhook deliveries
      description: |-
        List webhook deliveries

        View delivery history for debugging.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: status
          in: query
          required: false
          description: Filter by status
          schema:
            $ref: '#/components/schemas/WebhookDeliveryStatus'
          explode: false
        - name: eventType
          in: query
          required: false
          description: Filter by event type
          schema:
            type: string
          explode: false
        - name: createdAfter
          in: query
          required: false
          description: Filter deliveries after this timestamp
          schema:
            type: string
            format: date-time
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookDeliveryListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}/deliveries/{deliveryId}:
    get:
      operationId: Webhooks_getDelivery
      summary: Get webhook delivery
      description: Get a specific delivery
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
        - name: deliveryId
          in: path
          required: true
          description: Delivery ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookDeliveryResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}/deliveries/{deliveryId}/retry:
    post:
      operationId: Webhooks_retryDelivery
      summary: Retry delivery
      description: |-
        Retry a failed delivery

        Manually triggers a retry for a failed delivery.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
        - name: deliveryId
          in: path
          required: true
          description: Delivery ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookDeliveryResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}/rotate-secret:
    post:
      operationId: Webhooks_rotateSecret
      summary: Rotate webhook secret
      description: |-
        Rotate webhook secret

        Generates a new secret. The old secret immediately stops working.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookCreatedResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/orgs/{orgId}/webhooks/{webhookId}/test:
    post:
      operationId: Webhooks_test
      summary: Test webhook
      description: |-
        Test a webhook

        Sends a test event to verify the webhook is configured correctly.
      parameters:
        - name: orgId
          in: path
          required: true
          description: Organization ID
          schema:
            type: string
        - name: webhookId
          in: path
          required: true
          description: Webhook ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          success:
                            type: boolean
                            description: Whether the test was successful
                          httpStatus:
                            type: integer
                            format: int32
                            description: HTTP status code from the webhook endpoint
                          durationMs:
                            type: integer
                            format: int32
                            description: Response time in milliseconds
                          error:
                            type: string
                            description: Error message if failed
                        required:
                          - success
                      meta:
                        $ref: '#/components/schemas/ResponseMeta'
                    required:
                      - data
                      - meta
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Webhooks
  /v1/preferences:
    get:
      operationId: NotificationPreferencesRoutes_getPreferences
      summary: Get notification preferences
      description: |-
        Get notification preferences for the current user
        Returns default values if no preferences are set
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/NotificationPreferencesResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notification Preferences
    patch:
      operationId: NotificationPreferencesRoutes_updatePreferences
      summary: Update notification preferences
      description: |-
        Update notification preferences for the current user
        Supports partial updates - only provided fields will be updated
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/NotificationPreferencesResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Notification Preferences
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePreferencesRequest'
  /v1/pricing/plans:
    get:
      operationId: PublicPricing_listPublicPlans
      summary: List public subscription plans
      description: |-
        List public plans

        Returns all public, active subscription plans.
        Used for the public pricing page.
      parameters:
        - name: applicationId
          in: query
          required: false
          description: Filter by application ID
          schema:
            type: string
          explode: false
        - name: billingPeriod
          in: query
          required: false
          description: Filter by billing period
          schema:
            $ref: '#/components/schemas/PlanBillingPeriod'
          explode: false
        - name: includePopular
          in: query
          required: false
          description: Include popular badge
          schema:
            type: boolean
            default: true
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/PlanListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
  /v1/roles:
    get:
      operationId: GlobalRoles_list
      summary: List global roles
      description: |-
        List all global roles

        Returns global roles (no tenant scope) for the default application.
      parameters:
        - name: page
          in: query
          required: false
          description: Page number (1-indexed)
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          description: Number of items per page
          schema:
            type: integer
            format: int32
            default: 50
          explode: false
        - name: isSystemRole
          in: query
          required: false
          description: Filter by system role status
          schema:
            type: boolean
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
    post:
      operationId: GlobalRoles_create
      summary: Create global role
      description: |-
        Create a global role

        Creates a role that applies across all tenants.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '201':
          description: The request has succeeded and a new resource has been created as a result.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleResponse'
      tags:
        - Roles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRoleRequest'
        description: Role data
  /v1/roles/{roleId}:
    get:
      operationId: GlobalRoles_get
      summary: Get role
      description: Get a role by ID
      parameters:
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
    patch:
      operationId: GlobalRoles_update
      summary: Update role
      description: |-
        Update a role

        System roles cannot be renamed but their permissions can be modified.
      parameters:
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/RoleResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRoleRequest'
        description: Role update data
    delete:
      operationId: GlobalRoles_delete
      summary: Delete role
      description: |-
        Delete a role

        System roles cannot be deleted.
        Fails if role is assigned to any users.
      parameters:
        - name: roleId
          in: path
          required: true
          description: Role ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
      tags:
        - Roles
  /v1/system-organizations:
    get:
      operationId: SystemOrganizations_list
      description: List all system organizations (Admin only)
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            format: int32
            default: 1
          explode: false
        - name: pageSize
          in: query
          required: false
          schema:
            type: integer
            format: int32
            default: 20
          explode: false
        - name: search
          in: query
          required: false
          schema:
            type: string
          explode: false
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemOrganizationListResponse'
        '401':
          description: Access is unauthorized.
        '403':
          description: Access is forbidden.
      tags:
        - System Organizations
  /v1/system-organizations/{id}:
    patch:
      operationId: SystemOrganizations_update
      description: Update a system organization
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemOrganizationResponse'
        '401':
          description: Access is unauthorized.
        '403':
          description: Access is forbidden.
        '404':
          description: The server cannot find the requested resource.
      tags:
        - System Organizations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSystemOrganizationRequest'
    delete:
      operationId: SystemOrganizations_delete
      description: Delete a system organization (soft delete)
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SoftDeleteResponse'
        '401':
          description: Access is unauthorized.
        '403':
          description: Access is forbidden.
        '404':
          description: The server cannot find the requested resource.
      tags:
        - System Organizations
  /v1/users/me/available-contexts:
    get:
      operationId: AvailableContexts_list
      summary: List available contexts
      description: |-
        List all available contexts for the current user

        Returns all applications and tenants the user has access to.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UserContextListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Context
  /v1/users/me/context:
    get:
      operationId: CurrentUserContext_get
      summary: Get active context
      description: |-
        Get current user's active context

        Returns the currently active application and tenant for the user.
        This is for UI state management, not authorization decisions.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/ActiveContextResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Context
  /v1/users/me/switch-context:
    post:
      operationId: ContextSwitch_switch
      summary: Switch context
      description: |-
        Switch user's active context

        Changes the active application and/or tenant.
        This is for UI state management, not authorization decisions.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/SwitchContextResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Context
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SwitchContextRequest'
        description: Target context
  /v1/users/{userId}/roles:
    get:
      operationId: AllUserRoles_list
      summary: List all user roles
      description: |-
        List user's roles across all applications and tenants

        Returns all role assignments for the user across all contexts.
      parameters:
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/UserRoleAssignmentListResponse'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Roles
  /v1/webhooks/payments/midtrans:
    post:
      operationId: PaymentWebhooks_handleMidtrans
      summary: Handle Midtrans webhook
      description: |-
        Midtrans webhook handler

        Receives webhook events from Midtrans.
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookAcknowledgment'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: {}
        description: Webhook payload
  /v1/webhooks/payments/xendit:
    post:
      operationId: PaymentWebhooks_handleXendit
      summary: Handle Xendit webhook
      description: |-
        Xendit webhook handler

        Receives webhook events from Xendit.
        Verifies signature via x-callback-token header.
      parameters:
        - name: x-callback-token
          in: header
          required: true
          description: Xendit callback token (signature)
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/WebhookAcknowledgment'
                  - $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Subscriptions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: {}
        description: Webhook payload
components:
  schemas:
    AcceptLegalDocumentRequest:
      type: object
      required:
        - documentType
        - versionId
      properties:
        documentType:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentType'
          description: Document type being accepted
        versionId:
          type: string
          description: Version ID being accepted
      description: Record user acceptance
    AcknowledgeAnnouncementResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            announcementId:
              type: string
              description: Announcement ID
            acknowledgedAt:
              type: string
              format: date-time
              description: Timestamp when acknowledged
          required:
            - announcementId
            - acknowledgedAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Acknowledge announcement response
    ActiveContext:
      type: object
      required:
        - userId
        - activeApplicationId
        - updatedAt
      properties:
        userId:
          type: string
          description: User ID
          example: usr_123
        activeApplicationId:
          type: string
          description: Currently active application ID
          example: app_default
        activeTenantId:
          type: string
          description: Currently active tenant ID (null if no tenant selected)
          example: org_abc123
        updatedAt:
          type: string
          format: date-time
          description: When the context was last updated
      description: User's active context (current app/tenant selection)
    ActiveContextResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ActiveContext'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Active context response
    ActiveLegalDocumentResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            id:
              type: string
              description: Document ID
            type:
              allOf:
                - $ref: '#/components/schemas/LegalDocumentType'
              description: Document type
            versionId:
              type: string
              description: Version ID
            version:
              type: integer
              format: int32
              description: Version number
            title:
              type: string
              description: Title
            content:
              type: string
              description: Content
            publishedAt:
              type: string
              format: date-time
              description: When published
            hasAccepted:
              type: boolean
              description: Whether user has accepted this version
            acceptedAt:
              type: string
              format: date-time
              description: When user accepted (if applicable)
          required:
            - id
            - type
            - versionId
            - version
            - title
            - content
            - publishedAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Active public document response (for users)
    ActiveLegalDocumentsListResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: Document ID
              type:
                allOf:
                  - $ref: '#/components/schemas/LegalDocumentType'
                description: Document type
              versionId:
                type: string
                description: Version ID
              title:
                type: string
                description: Title
              publishedAt:
                type: string
                format: date-time
                description: When published
              hasAccepted:
                type: boolean
                description: Whether user has accepted
            required:
              - id
              - type
              - versionId
              - title
              - publishedAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: List of active documents for public consumption
    Announcement:
      type: object
      required:
        - id
        - title
        - content
        - priority
        - scope
        - targetRoles
        - isDismissible
        - publishAt
        - isActive
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique announcement identifier
          example: ann_abc123
        orgId:
          type: string
          description: Organization ID (null for system-wide announcements)
          example: org_xyz789
        title:
          type: string
          description: Announcement title
          example: Scheduled Maintenance
        content:
          type: string
          description: Announcement content (supports Markdown for links, formatting, and equations)
          example: We will be performing scheduled maintenance on...
        linkUrl:
          type: string
          description: Optional link URL
          example: https://example.com/details
        linkText:
          type: string
          description: 'Optional link text (default: "Learn more")'
          example: Read full guide
        priority:
          allOf:
            - $ref: '#/components/schemas/AnnouncementPriority'
          description: Priority level
        scope:
          allOf:
            - $ref: '#/components/schemas/AnnouncementScope'
          description: Scope of announcement
        targetRoles:
          type: array
          items:
            $ref: '#/components/schemas/AnnouncementTargetRole'
          description: Target roles (empty array means all roles)
        isDismissible:
          type: boolean
          description: Whether users can dismiss this announcement
        publishAt:
          type: string
          format: date-time
          description: Scheduled publish date/time
        expiresAt:
          type: string
          format: date-time
          description: Optional expiration date/time
        isActive:
          type: boolean
          description: Whether announcement is active (manually toggled)
        createdBy:
          type: string
          description: User ID who created the announcement
          example: usr_admin123
        createdAt:
          type: string
          format: date-time
          description: Timestamp when created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when last updated
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when soft deleted
        viewCount:
          type: integer
          format: int32
          description: 'Analytics: total view count'
        readCount:
          type: integer
          format: int32
          description: 'Analytics: total read count'
        acknowledgeCount:
          type: integer
          format: int32
          description: 'Analytics: total acknowledgment count'
        dismissCount:
          type: integer
          format: int32
          description: 'Analytics: total dismissal count'
      description: Announcement resource model
    AnnouncementInteraction:
      type: object
      required:
        - id
        - announcementId
        - userId
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique interaction identifier
        announcementId:
          type: string
          description: Announcement ID
        userId:
          type: string
          description: User ID
        viewedAt:
          type: string
          format: date-time
          description: Timestamp when user first viewed the announcement
        readAt:
          type: string
          format: date-time
          description: Timestamp when user read (opened/expanded) the announcement
        dismissedAt:
          type: string
          format: date-time
          description: Timestamp when user dismissed the announcement
        acknowledgedAt:
          type: string
          format: date-time
          description: Timestamp when user acknowledged the announcement (critical only)
        createdAt:
          type: string
          format: date-time
          description: Timestamp when created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when last updated
      description: Announcement interaction tracking
    AnnouncementListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AnnouncementWithInteraction'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Announcement collection response
    AnnouncementPriority:
      type: string
      enum:
        - info
        - warning
        - critical
        - success
      description: Announcement priority level
    AnnouncementResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Announcement'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single announcement response
    AnnouncementScope:
      type: string
      enum:
        - system
        - organization
      description: Announcement scope
    AnnouncementStatsResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            viewCount:
              type: integer
              format: int32
              description: Total view count
            readCount:
              type: integer
              format: int32
              description: Total read count
            acknowledgeCount:
              type: integer
              format: int32
              description: Total acknowledgment count
            dismissCount:
              type: integer
              format: int32
              description: Total dismissal count
            viewRate:
              type: number
              format: float
              description: View rate percentage
            readRate:
              type: number
              format: float
              description: Read rate percentage
            acknowledgeRate:
              type: number
              format: float
              description: Acknowledgment rate percentage (for critical announcements)
          required:
            - viewCount
            - readCount
            - acknowledgeCount
            - dismissCount
            - viewRate
            - readRate
            - acknowledgeRate
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Announcement statistics response
    AnnouncementTargetRole:
      type: string
      enum:
        - all
        - admin
        - member
      description: User role for targeting
    AnnouncementWithInteraction:
      type: object
      required:
        - id
        - title
        - content
        - priority
        - scope
        - targetRoles
        - isDismissible
        - publishAt
        - isActive
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique announcement identifier
          example: ann_abc123
        orgId:
          type: string
          description: Organization ID (null for system-wide announcements)
          example: org_xyz789
        title:
          type: string
          description: Announcement title
          example: Scheduled Maintenance
        content:
          type: string
          description: Announcement content (supports Markdown for links, formatting, and equations)
          example: We will be performing scheduled maintenance on...
        linkUrl:
          type: string
          description: Optional link URL
          example: https://example.com/details
        linkText:
          type: string
          description: 'Optional link text (default: "Learn more")'
          example: Read full guide
        priority:
          allOf:
            - $ref: '#/components/schemas/AnnouncementPriority'
          description: Priority level
        scope:
          allOf:
            - $ref: '#/components/schemas/AnnouncementScope'
          description: Scope of announcement
        targetRoles:
          type: array
          items:
            $ref: '#/components/schemas/AnnouncementTargetRole'
          description: Target roles (empty array means all roles)
        isDismissible:
          type: boolean
          description: Whether users can dismiss this announcement
        publishAt:
          type: string
          format: date-time
          description: Scheduled publish date/time
        expiresAt:
          type: string
          format: date-time
          description: Optional expiration date/time
        isActive:
          type: boolean
          description: Whether announcement is active (manually toggled)
        createdBy:
          type: string
          description: User ID who created the announcement
          example: usr_admin123
        createdAt:
          type: string
          format: date-time
          description: Timestamp when created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when last updated
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when soft deleted
        viewCount:
          type: integer
          format: int32
          description: 'Analytics: total view count'
        readCount:
          type: integer
          format: int32
          description: 'Analytics: total read count'
        acknowledgeCount:
          type: integer
          format: int32
          description: 'Analytics: total acknowledgment count'
        dismissCount:
          type: integer
          format: int32
          description: 'Analytics: total dismissal count'
        interaction:
          allOf:
            - $ref: '#/components/schemas/AnnouncementInteraction'
          description: User's interaction with this announcement
        hasViewed:
          type: boolean
          description: Whether current user has viewed
        hasRead:
          type: boolean
          description: Whether current user has read
        hasDismissed:
          type: boolean
          description: Whether current user has dismissed
        hasAcknowledged:
          type: boolean
          description: Whether current user has acknowledged
      description: Announcement with user interaction data
    AnnouncementWithInteractionResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/AnnouncementWithInteraction'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Announcement with interaction response
    ApplyCouponRequest:
      type: object
      required:
        - couponCode
      properties:
        couponCode:
          type: string
          minLength: 1
          maxLength: 50
          description: Coupon code to apply
          example: LAUNCH50
      description: Apply coupon request
    AssignRoleRequest:
      type: object
      required:
        - roleId
      properties:
        roleId:
          type: string
          description: Role ID to assign
      description: Request to assign a role to a user
    AsyncExportResponse:
      type: object
      required:
        - jobId
        - status
        - statusUrl
        - meta
      properties:
        jobId:
          type: string
          description: Job ID for tracking
          example: job_abc123xyz
        status:
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
            - cancelled
          description: Current status
        statusUrl:
          type: string
          description: URL to check job status
          example: /v1/orgs/org_xyz/jobs/job_abc123xyz
        estimatedCompletion:
          type: string
          format: date-time
          description: Estimated completion time
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: Async export response (returns job info)
    AsyncJobResponse:
      type: object
      required:
        - jobId
        - status
        - statusUrl
        - meta
      properties:
        jobId:
          type: string
          description: Unique job identifier
        status:
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
          description: Current job status
        statusUrl:
          type: string
          description: URL to check job status
        estimatedCompletion:
          type: string
          format: date-time
          description: Estimated completion time
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: Response for async operations that return 202 Accepted
    AuditActor:
      type: object
      required:
        - type
        - id
      properties:
        type:
          allOf:
            - $ref: '#/components/schemas/AuditActorType'
          description: Type of actor
        id:
          type: string
          description: Actor ID (user ID, service account ID, or "system")
          example: usr_123
        email:
          type: string
          description: Actor email (for users)
          example: admin@example.com
        ipAddress:
          type: string
          description: IP address of the actor
          example: 192.168.1.1
        userAgent:
          type: string
          description: User agent string
      description: Actor who performed the action
    AuditActorType:
      type: string
      enum:
        - user
        - service
        - system
      description: Actor type - who performed the action
    AuditChange:
      type: object
      required:
        - old
        - new
      properties:
        old:
          description: Value before the change
        new:
          description: Value after the change
      description: Change record for a single field
    AuditLog:
      type: object
      required:
        - eventId
        - eventType
        - timestamp
        - tenantId
        - actor
        - resource
      properties:
        eventId:
          type: string
          description: 'Unique event identifier (format: evt_abc123)'
          example: evt_abc123
        eventType:
          type: string
          description: 'Event type (format: resource.action)'
          example: user.updated
        timestamp:
          type: string
          format: date-time
          description: When the event occurred
        tenantId:
          type: string
          description: Tenant where the event occurred
          example: org_xyz789
        actor:
          allOf:
            - $ref: '#/components/schemas/AuditActor'
          description: Who performed the action
        resource:
          allOf:
            - $ref: '#/components/schemas/AuditResource'
          description: What resource was affected
        changes:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/AuditChange'
          description: Changes made (for update operations)
        resourceBefore:
          type: object
          additionalProperties: {}
          description: Full resource state before the action (for deletes, sensitive ops)
        resourceAfter:
          type: object
          additionalProperties: {}
          description: Full resource state after the action (for creates, sensitive ops)
        metadata:
          allOf:
            - $ref: '#/components/schemas/AuditMetadata'
          description: Additional context
      description: |-
        Audit log entry

        Immutable record of an action in the system.
    AuditLogListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AuditLog'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Audit log list response
    AuditLogResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/AuditLog'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single audit log response
    AuditMetadata:
      type: object
      properties:
        requestId:
          type: string
          description: Request ID for correlation
          example: req_7k3m9x2p4b
        sessionId:
          type: string
          description: Session ID
          example: ses_def456
        reason:
          type: string
          description: Reason for the action (if provided)
        extra:
          type: object
          additionalProperties: {}
          description: Additional context-specific data
      description: Additional metadata for the audit event
    AuditResource:
      type: object
      required:
        - type
        - id
      properties:
        type:
          type: string
          description: Resource type
          example: user
        id:
          type: string
          description: Resource ID
          example: usr_456
        endpoint:
          type: string
          description: API endpoint that was called
          example: /v1/orgs/org_xyz789/users/usr_456
        method:
          type: string
          description: HTTP method used
          example: PATCH
      description: Resource affected by the action
    Backup:
      type: object
      required:
        - id
        - type
        - format
        - status
        - createdBy
        - createdAt
      properties:
        id:
          type: string
          description: Unique backup identifier
          example: backup_abc123
        organizationId:
          type: string
          description: Organization ID (null for system backups)
          example: org_xyz789
        type:
          allOf:
            - $ref: '#/components/schemas/BackupType'
          description: Backup type
        format:
          allOf:
            - $ref: '#/components/schemas/BackupFormat'
          description: Backup format
        status:
          allOf:
            - $ref: '#/components/schemas/BackupStatus'
          description: Current status
        filePath:
          type: string
          description: Path in storage
        fileSize:
          type: integer
          format: int64
          description: File size in bytes
        checksum:
          type: string
          description: SHA-256 checksum
        includedTables:
          type: array
          items:
            type: string
          description: Tables included in backup
        metadata:
          allOf:
            - $ref: '#/components/schemas/BackupMetadata'
          description: Backup metadata
        expiresAt:
          type: string
          format: date-time
          description: When backup expires (for auto-cleanup)
        createdBy:
          type: string
          description: Who created the backup
          example: usr_123
        createdAt:
          type: string
          format: date-time
          description: When the backup was created
        completedAt:
          type: string
          format: date-time
          description: When the backup completed
      description: |-
        Backup resource

        Represents a point-in-time snapshot of organization or system data.
    BackupFormat:
      type: string
      enum:
        - json
        - pg_dump
      description: Backup format
    BackupListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Backup'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Backup list response
    BackupMetadata:
      type: object
      properties:
        rowCounts:
          type: object
          additionalProperties:
            type: integer
            format: int32
          description: Row counts per table
        filesCount:
          type: integer
          format: int32
          description: Number of files included
        filesSize:
          type: integer
          format: int64
          description: Total size of files
        duration:
          type: integer
          format: int64
          description: Duration in milliseconds
        error:
          type: string
          description: Error message (if failed)
      description: Backup metadata
    BackupResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Backup'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single backup response
    BackupStatus:
      type: string
      enum:
        - pending
        - in_progress
        - completed
        - failed
      description: Backup status
    BackupType:
      type: string
      enum:
        - organization
        - system
      description: Backup type
    BatchDeleteResponse:
      type: object
      required:
        - results
        - summary
        - meta
      properties:
        results:
          type: array
          items:
            $ref: '#/components/schemas/BatchDeleteResult'
          description: Results for each item in the batch
        summary:
          allOf:
            - $ref: '#/components/schemas/BatchSummary'
          description: Summary of operation results
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: Batch delete response envelope
    BatchDeleteResult:
      type: object
      required:
        - index
        - status
      properties:
        index:
          type: integer
          format: int32
          description: Index of the item in the original request array
        status:
          type: string
          enum:
            - success
            - error
            - skipped
          description: Status of the operation for this item
        data:
          type: object
          properties:
            id:
              type: string
              description: ID of the deleted item
            deletedAt:
              type: string
              format: date-time
              description: Timestamp when the item was deleted
          required:
            - id
            - deletedAt
          description: Deleted item info (present if status is success)
        error:
          type: object
          properties:
            code:
              type: string
              description: Error code
            message:
              type: string
              description: Error message
          required:
            - code
            - message
          description: Error details (present if status is error)
      description: Batch delete result (soft delete)
    BatchOptions:
      type: object
      properties:
        atomic:
          type: boolean
          description: If true, all items succeed or all fail (transactional)
        returnRecords:
          type: boolean
          description: If true, return created/updated records in response
        skipDuplicates:
          type: boolean
          description: If true, skip items that already exist (duplicates)
        validateOnly:
          type: boolean
          description: If true, validate without actually creating/updating
      description: Options for batch operations
    BatchSummary:
      type: object
      required:
        - total
        - successful
        - failed
        - skipped
      properties:
        total:
          type: integer
          format: int32
          description: Total number of items in the request
        successful:
          type: integer
          format: int32
          description: Number of successfully processed items
        failed:
          type: integer
          format: int32
          description: Number of failed items
        skipped:
          type: integer
          format: int32
          description: Number of skipped items (e.g., duplicates)
      description: Summary of batch operation results
    CancelSubscriptionRequest:
      type: object
      properties:
        immediate:
          type: boolean
          description: Cancel immediately (vs. at period end)
        reason:
          type: string
          maxLength: 500
          description: Optional cancellation reason
      description: Cancel subscription request
    ColumnAlignment:
      type: string
      enum:
        - left
        - center
        - right
      description: Column alignment
    ColumnFormat:
      type: string
      enum:
        - text
        - number
        - currency
        - date
        - datetime
        - boolean
        - percentage
      description: Column data format
    ConfirmUploadRequest:
      type: object
      properties:
        etag:
          type: string
          description: 'Optional: ETag from S3 response for verification'
      description: Request to confirm an upload completed successfully
    Coupon:
      type: object
      required:
        - id
        - code
        - type
        - isActive
        - currentRedemptions
        - firstTimeOnly
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique coupon identifier (format: coupon_abc123)'
          example: coupon_launch50
        code:
          type: string
          minLength: 1
          maxLength: 50
          description: Coupon code that users enter
          example: LAUNCH50
        name:
          type: string
          maxLength: 200
          description: Internal name for reference
          example: Launch Promotion 50% Off
        type:
          allOf:
            - $ref: '#/components/schemas/CouponType'
          description: Discount type
        percentOff:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Percentage off (for percent type, 1-100)
          example: 20
        amountOffCents:
          type: integer
          format: int32
          minimum: 1
          description: Amount off in cents (for fixed type)
          example: 50000
        trialExtensionDays:
          type: integer
          format: int32
          minimum: 1
          description: Trial extension in days (for trial_extension type)
          example: 7
        isActive:
          type: boolean
          description: Whether coupon is active
        startsAt:
          type: string
          format: date-time
          description: When coupon becomes valid
        expiresAt:
          type: string
          format: date-time
          description: When coupon expires
        maxRedemptions:
          type: integer
          format: int32
          minimum: 1
          description: Maximum number of redemptions (null = unlimited)
          example: 100
        currentRedemptions:
          type: integer
          format: int32
          minimum: 0
          description: Current redemption count
          example: 5
        firstTimeOnly:
          type: boolean
          description: Only valid for first-time customers
        planIds:
          type: string
          description: Comma-separated plan IDs (null = all plans)
          example: plan_basic_monthly,plan_pro_monthly
        createdAt:
          type: string
          format: date-time
          description: When the coupon was created
        updatedAt:
          type: string
          format: date-time
          description: When the coupon was last updated
      description: |-
        Discount coupon

        Represents a promotional discount code.
    CouponListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Coupon'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Coupon list response
    CouponResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Coupon'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Coupon response
    CouponType:
      type: string
      enum:
        - percent
        - fixed
        - trial_extension
      description: Coupon discount type
    CreateAnnouncementRequest:
      type: object
      required:
        - title
        - content
      properties:
        orgId:
          type: string
          nullable: true
          description: Organization ID (null for system-wide announcements visible to all organizations)
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: Announcement title
          example: System Upgrade Scheduled
        content:
          type: string
          minLength: 1
          maxLength: 5000
          description: Announcement content (supports Markdown for links, formatting, and equations)
          example: We will be upgrading our systems this weekend...
        linkUrl:
          type: string
          maxLength: 2000
          description: Optional link URL
          example: https://example.com/details
        linkText:
          type: string
          maxLength: 50
          description: Optional link text
          example: Read full guide
        priority:
          allOf:
            - $ref: '#/components/schemas/AnnouncementPriority'
          description: 'Priority level (default: info)'
        scope:
          allOf:
            - $ref: '#/components/schemas/AnnouncementScope'
          description: 'Scope (default: organization)'
        targetRoles:
          type: array
          items:
            $ref: '#/components/schemas/AnnouncementTargetRole'
          description: Target roles (empty means all roles)
        isDismissible:
          type: boolean
          description: 'Whether users can dismiss (default: true)'
        publishAt:
          type: string
          format: date-time
          description: 'Scheduled publish date/time (default: now)'
        expiresAt:
          type: string
          format: date-time
          description: Optional expiration date/time
        isActive:
          type: boolean
          description: 'Whether announcement is active (default: true)'
      description: Request body for creating an announcement
    CreateBackupRequest:
      type: object
      properties:
        description:
          type: string
          description: Optional description
        includeFiles:
          type: boolean
          description: Include storage files in backup
        encrypt:
          type: boolean
          description: Encrypt the backup
        password:
          type: string
          description: Password for encryption (required if encrypt is true)
      description: Create backup request
    CreateCouponRequest:
      type: object
      required:
        - code
        - type
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 50
          description: Coupon code (uppercase recommended)
        name:
          type: string
          maxLength: 200
          description: Internal name
        type:
          allOf:
            - $ref: '#/components/schemas/CouponType'
          description: Discount type
        percentOff:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Percentage off (required if type=percent)
        amountOffCents:
          type: integer
          format: int32
          minimum: 1
          description: Amount off in cents (required if type=fixed)
        trialExtensionDays:
          type: integer
          format: int32
          minimum: 1
          description: Trial extension days (required if type=trial_extension)
        isActive:
          type: boolean
          description: Is active
        startsAt:
          type: string
          format: date-time
          description: Validity start
        expiresAt:
          type: string
          format: date-time
          description: Validity end
        maxRedemptions:
          type: integer
          format: int32
          minimum: 1
          description: Max redemptions
        firstTimeOnly:
          type: boolean
          description: First-time only
        planIds:
          type: string
          description: Plan IDs (comma-separated)
      description: Create coupon request
    CreateExampleCommentRequest:
      type: object
      required:
        - content
        - authorId
      properties:
        content:
          type: string
          description: Comment content
          example: Great post! Very informative.
        authorId:
          type: string
          description: Author user ID
          example: usr_commenter789
      description: Request body for creating a new comment
    CreateExamplePostRequest:
      type: object
      required:
        - title
        - content
        - authorId
      properties:
        title:
          type: string
          description: Post title
          example: Introduction to TypeSpec
        content:
          type: string
          description: Post content (supports markdown)
          example: This is the full content of the post...
        authorId:
          type: string
          description: Author user ID
          example: usr_author123
        category:
          type: string
          description: Post category
        tags:
          type: array
          items:
            type: string
          description: Post tags
        isFeatured:
          type: boolean
          description: Whether the post is featured
        publishDate:
          type: string
          format: date-time
          description: Scheduled publish date
        coverImageId:
          type: string
          description: Cover image file ID
        attachmentFileId:
          type: string
          description: Attachment file ID
        galleryImageIds:
          type: array
          items:
            type: string
          description: Gallery images (file IDs)
        documentFileIds:
          type: array
          items:
            type: string
          description: Attached documents (file IDs)
        status:
          allOf:
            - $ref: '#/components/schemas/ExamplePostStatus'
          description: 'Post status (default: draft)'
      description: Request body for creating a new post
    CreateJobRequest:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          description: Job type (e.g., "report", "import", "export", "my-custom-job")
        input:
          type: object
          additionalProperties: {}
          description: Job input parameters (job-specific)
        metadata:
          allOf:
            - $ref: '#/components/schemas/JobMetadata'
          description: Job metadata (references, format, etc.)
      description: Request to create a new job
    CreateLegalDocumentRequest:
      type: object
      required:
        - type
        - title
        - content
      properties:
        type:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentType'
          description: Document type
        slug:
          type: string
          minLength: 1
          maxLength: 100
          description: URL-friendly slug (auto-generated if not provided)
        locale:
          type: string
          minLength: 2
          maxLength: 10
          description: Locale/language code
          example: en
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: Initial version title
        content:
          type: string
          minLength: 1
          description: Initial version content
      description: Create a new legal document
    CreateLegalDocumentVersionRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: Version title
        content:
          type: string
          minLength: 1
          description: Full content
        changelog:
          type: string
          maxLength: 2000
          description: Summary of changes
        requiresReAcceptance:
          type: boolean
          description: Whether users must re-accept
      description: Create a new version of a document
    CreatePlanRequest:
      type: object
      required:
        - applicationId
        - name
        - slug
        - priceCents
        - billingPeriod
      properties:
        applicationId:
          type: string
          description: Application ID
          example: app_main
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Plan name
        slug:
          type: string
          minLength: 1
          maxLength: 50
          description: Plan slug
        description:
          type: string
          maxLength: 500
          description: Plan description
        priceCents:
          type: integer
          format: int32
          minimum: 0
          description: Price in cents
        currency:
          type: string
          description: Currency code
          example: IDR
        billingPeriod:
          allOf:
            - $ref: '#/components/schemas/PlanBillingPeriod'
          description: Billing period
        trialDays:
          type: integer
          format: int32
          minimum: 0
          description: Trial days
        features:
          allOf:
            - $ref: '#/components/schemas/PlanFeatures'
          description: Features
        metadata:
          type: object
          additionalProperties: {}
          description: Metadata
        sortOrder:
          type: integer
          format: int32
          description: Sort order
        visibility:
          allOf:
            - $ref: '#/components/schemas/PlanVisibility'
          description: Visibility
        isActive:
          type: boolean
          description: Is active
        isPopular:
          type: boolean
          description: Is popular
      description: Create subscription plan request
    CreateReportTemplateRequest:
      type: object
      required:
        - name
        - format
        - templateContent
        - columns
      properties:
        name:
          type: string
          description: Template name
          example: Monthly Sales Report
        description:
          type: string
          description: Template description
        format:
          allOf:
            - $ref: '#/components/schemas/ReportFormat'
          description: Output format
        templateContent:
          type: string
          description: Template content (Eta template string)
          example: <% it.data.forEach(row => { %><%= row.name %><% }) %>
        options:
          allOf:
            - $ref: '#/components/schemas/ReportOptions'
          description: Format-specific options
        dataSource:
          allOf:
            - $ref: '#/components/schemas/DataSourceConfig'
          description: Data source configuration
        columns:
          type: array
          items:
            $ref: '#/components/schemas/ReportColumnConfig'
          description: Column definitions
        isPublic:
          type: boolean
          description: 'Whether template is visible to all org members (default: false)'
      description: Request body for creating a new report template
    CreateRoleRequest:
      type: object
      required:
        - name
        - permissions
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Role name
        description:
          type: string
          maxLength: 500
          description: Role description
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/PermissionInput'
          minItems: 1
          description: Permissions to grant
      description: Request to create a custom role
    CreateScheduledJobRequest:
      type: object
      required:
        - jobType
        - name
        - frequency
      properties:
        jobType:
          type: string
          description: Job type to run
          example: report
        jobConfig:
          type: object
          additionalProperties: {}
          description: Job configuration passed to the job handler
        name:
          type: string
          description: Schedule name
          example: Weekly Sales Summary
        description:
          type: string
          description: Schedule description
        frequency:
          allOf:
            - $ref: '#/components/schemas/ScheduleFrequency'
          description: Schedule frequency
        cronExpression:
          type: string
          description: Cron expression (required when frequency is custom)
        dayOfWeek:
          allOf:
            - $ref: '#/components/schemas/DayOfWeek'
          description: Day of week (for weekly frequency)
        dayOfMonth:
          type: integer
          format: int32
          description: Day of month (for monthly frequency)
        hour:
          type: integer
          format: int32
          description: Hour to run (0-23)
        minute:
          type: integer
          format: int32
          description: Minute to run (0-59)
        timezone:
          type: string
          description: Timezone for scheduling
          example: America/New_York
        startDate:
          type: string
          format: date-time
          description: Start date for the schedule
        endDate:
          type: string
          format: date-time
          description: End date for the schedule
        deliveryMethod:
          allOf:
            - $ref: '#/components/schemas/JobDeliveryMethod'
          description: Delivery method for job results
        deliveryConfig:
          allOf:
            - $ref: '#/components/schemas/DeliveryConfig'
          description: Delivery configuration
        isActive:
          type: boolean
          description: 'Whether the schedule is active (default: true)'
      description: Request body for creating a scheduled job
    CreateSubscriptionRequest:
      type: object
      required:
        - planId
      properties:
        planId:
          type: string
          description: Plan ID to subscribe to
          example: plan_basic_monthly
        couponCode:
          type: string
          maxLength: 50
          description: Optional coupon code to apply
          example: LAUNCH50
        paymentMethodId:
          type: string
          description: Payment method ID (if already exists)
        returnUrl:
          type: string
          description: Return URL after payment setup
      description: Create subscription request
    CreateSubscriptionResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Subscription'
        linkingUrl:
          type: string
          description: Payment method linking URL (if payment setup required)
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Subscription creation response (with payment link)
    CreateWebhookRequest:
      type: object
      required:
        - url
        - events
      properties:
        url:
          type: string
          format: uri
          description: URL to receive webhook payloads (must be HTTPS)
        name:
          type: string
          maxLength: 100
          description: Human-readable name
        description:
          type: string
          maxLength: 500
          description: Description
        events:
          type: array
          items:
            type: string
          minItems: 1
          description: Event types to subscribe to
        isActive:
          type: boolean
          description: 'Whether the webhook is active (default: true)'
      description: Request to create a webhook
    CursorPagination:
      type: object
      required:
        - limit
        - hasNext
        - nextCursor
        - previousCursor
      properties:
        limit:
          type: integer
          format: int32
          description: Maximum items returned per page
        hasNext:
          type: boolean
          description: Whether there is a next page
        nextCursor:
          type: string
          nullable: true
          description: Cursor for fetching the next page (null if no more pages)
        previousCursor:
          type: string
          nullable: true
          description: Cursor for fetching the previous page (null if on first page)
      description: Cursor-based pagination for large datasets or real-time data
    DataSourceConfig:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            - query
            - api
            - custom
          description: Data source type
        source:
          type: string
          description: SQL query or API endpoint path
        defaultParams:
          type: object
          additionalProperties: {}
          description: Default parameters for the query/API
      description: Data source configuration for report templates
    DataSourceConfigUpdate:
      type: object
      properties:
        type:
          type: string
          enum:
            - query
            - api
            - custom
          description: Data source type
        source:
          type: string
          description: SQL query or API endpoint path
        defaultParams:
          type: object
          additionalProperties: {}
          description: Default parameters for the query/API
      description: Data source configuration for report templates
    DayOfWeek:
      type: string
      enum:
        - monday
        - tuesday
        - wednesday
        - thursday
        - friday
        - saturday
        - sunday
      description: Day of week for weekly schedules
    DeliveryConfig:
      type: object
      properties:
        email:
          allOf:
            - $ref: '#/components/schemas/EmailDeliveryConfig'
          description: Email delivery settings (when deliveryMethod is email)
        webhook:
          allOf:
            - $ref: '#/components/schemas/WebhookDeliveryConfig'
          description: Webhook delivery settings (when deliveryMethod is webhook)
        storage:
          allOf:
            - $ref: '#/components/schemas/StorageDeliveryConfig'
          description: Storage delivery settings (when deliveryMethod is storage)
      description: Combined delivery configuration
    DeliveryConfigUpdate:
      type: object
      properties:
        email:
          allOf:
            - $ref: '#/components/schemas/EmailDeliveryConfigUpdate'
          description: Email delivery settings (when deliveryMethod is email)
        webhook:
          allOf:
            - $ref: '#/components/schemas/WebhookDeliveryConfigUpdate'
          description: Webhook delivery settings (when deliveryMethod is webhook)
        storage:
          allOf:
            - $ref: '#/components/schemas/StorageDeliveryConfigUpdate'
          description: Storage delivery settings (when deliveryMethod is storage)
      description: Combined delivery configuration
    DismissAnnouncementResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            announcementId:
              type: string
              description: Announcement ID
            dismissedAt:
              type: string
              format: date-time
              description: Timestamp when dismissed
          required:
            - announcementId
            - dismissedAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Dismiss announcement response
    EmailDeliveryConfig:
      type: object
      required:
        - recipients
      properties:
        recipients:
          type: array
          items:
            type: string
          description: Email recipients
        subject:
          type: string
          description: Email subject (supports template variables)
          example: Your Weekly Report - {{date}}
        body:
          type: string
          description: Email body text (supports template variables)
        cc:
          type: array
          items:
            type: string
          description: CC recipients
        bcc:
          type: array
          items:
            type: string
          description: BCC recipients
      description: Email delivery configuration
    EmailDeliveryConfigUpdate:
      type: object
      properties:
        recipients:
          type: array
          items:
            type: string
          description: Email recipients
        subject:
          type: string
          description: Email subject (supports template variables)
          example: Your Weekly Report - {{date}}
        body:
          type: string
          description: Email body text (supports template variables)
        cc:
          type: array
          items:
            type: string
          description: CC recipients
        bcc:
          type: array
          items:
            type: string
          description: BCC recipients
      description: Email delivery configuration
    Error:
      type: object
      required:
        - code
        - message
        - requestId
      properties:
        code:
          type: string
          description: Machine-readable error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: array
          items:
            $ref: '#/components/schemas/ErrorDetail'
          description: Array of detailed error information (e.g., validation errors)
        requestId:
          type: string
          description: Request ID for tracking and debugging
        documentationUrl:
          type: string
          description: URL to documentation about this error (optional)
      description: Standard error object
    ErrorDetail:
      type: object
      required:
        - field
        - code
        - message
      properties:
        field:
          type: string
          description: The field that caused the error (for validation errors)
        code:
          type: string
          description: Specific error code for this detail
        message:
          type: string
          description: Human-readable error message
        metadata:
          type: object
          additionalProperties: {}
          description: Additional metadata about the error
      description: Detailed error information for a specific field or validation
    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          allOf:
            - $ref: '#/components/schemas/Error'
          description: The error object
      description: Standard error response envelope
    ExampleComment:
      type: object
      required:
        - id
        - orgId
        - postId
        - content
        - authorId
        - isDeleted
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique comment identifier (format: cmt_{randomString})'
          example: cmt_abc123
        orgId:
          type: string
          description: Organization ID (tenant scope)
          example: org_xyz789
        postId:
          type: string
          description: Parent post ID
          example: post_parent456
        content:
          type: string
          description: Comment content
          example: Great post! Very informative.
        authorId:
          type: string
          description: Author user ID
          example: usr_commenter789
        isDeleted:
          type: boolean
          description: Whether the comment is soft deleted
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when the comment was soft deleted
        deletedBy:
          type: string
          description: User ID who deleted this comment
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the comment was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the comment was last updated
      description: |-
        ExampleComment resource model (nested under ExamplePost)

        Demonstrates:
        - Nested sub-resource pattern (belongs to a post)
        - Multi-tenant scoping (orgId)
        - Soft delete with restore capability
    ExampleCommentListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ExampleComment'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Comment collection response
    ExampleCommentResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ExampleComment'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single comment response
    ExamplePost:
      type: object
      required:
        - id
        - orgId
        - title
        - content
        - authorId
        - tags
        - isFeatured
        - galleryImageIds
        - documentFileIds
        - status
        - isDeleted
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique post identifier (format: post_{randomString})'
          example: post_abc123
        orgId:
          type: string
          description: Organization ID (tenant scope)
          example: org_xyz789
        title:
          type: string
          description: Post title
          example: Introduction to TypeSpec
        content:
          type: string
          description: Post content (supports markdown)
          example: This is the full content of the post...
        authorId:
          type: string
          description: Author user ID
          example: usr_author123
        category:
          type: string
          description: Post category
          example: technology
        tags:
          type: array
          items:
            type: string
          description: Post tags
          example:
            - typescript
            - api
        isFeatured:
          type: boolean
          description: Whether the post is featured
        publishDate:
          type: string
          format: date-time
          description: Scheduled publish date
        coverImageId:
          type: string
          description: Cover image file ID
        attachmentFileId:
          type: string
          description: Attachment file ID
        galleryImageIds:
          type: array
          items:
            type: string
          description: Gallery images (file IDs)
        documentFileIds:
          type: array
          items:
            type: string
          description: Attached documents (file IDs)
        status:
          allOf:
            - $ref: '#/components/schemas/ExamplePostStatus'
          description: Post status
        publishedAt:
          type: string
          format: date-time
          description: Timestamp when the post was published (null if not published)
        isDeleted:
          type: boolean
          description: Whether the post is soft deleted
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when the post was soft deleted (null if not deleted)
        deletedBy:
          type: string
          description: User ID who deleted this post (null if not deleted)
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the post was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the post was last updated
      description: |-
        ExamplePost resource model

        Demonstrates a typical content resource with:
        - Multi-tenant scoping (orgId)
        - Status workflow (draft  published  archived)
        - Soft delete with restore capability
    ExamplePostCursorListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ExamplePost'
        pagination:
          $ref: '#/components/schemas/CursorPagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: |-
        Post collection response (cursor-based)

        Used for streaming/real-time scenarios or large datasets
    ExamplePostListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ExamplePost'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Post collection response (page-based)
    ExamplePostResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ExamplePost'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single post response
    ExamplePostStatus:
      type: string
      enum:
        - draft
        - published
        - archived
      description: Post status enum
    ExportAcceptancesRequest:
      type: object
      properties:
        documentId:
          type: string
          description: Document ID to export acceptances for
        versionId:
          type: string
          description: Version ID to export acceptances for
        startDate:
          type: string
          format: date-time
          description: Start date filter
        endDate:
          type: string
          format: date-time
          description: End date filter
        format:
          type: string
          enum:
            - csv
            - json
          description: Export format
      description: Export acceptances request (for compliance)
    ExportRequest:
      type: object
      properties:
        templateId:
          type: string
          description: Report template ID (optional, for template-based exports)
        format:
          allOf:
            - $ref: '#/components/schemas/ReportFormat'
          description: Output format (required if no templateId)
        data:
          type: array
          items: {}
          description: Data to export (for client-side data)
        columns:
          type: array
          items:
            $ref: '#/components/schemas/ReportColumnConfig'
          description: Column definitions (required if no templateId)
        options:
          allOf:
            - $ref: '#/components/schemas/ReportOptions'
          description: Format-specific options
        filters:
          type: object
          additionalProperties: {}
          description: Filters to apply to data source
        sort:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              direction:
                type: string
                enum:
                  - asc
                  - desc
            required:
              - field
              - direction
          description: Sort configuration
        parameters:
          type: object
          additionalProperties: {}
          description: Additional parameters for template
        selectedIds:
          type: array
          items:
            type: string
          description: Export only selected rows (by ID)
        async:
          type: boolean
          description: Use async processing (returns job ID)
      description: Request body for triggering an export
    File:
      type: object
      required:
        - id
        - filename
        - size
        - mimeType
        - kind
        - storagePath
        - uploadedBy
        - uploadedAt
        - virusScanStatus
        - access
        - status
        - isDeleted
      properties:
        id:
          type: string
          description: 'Unique file identifier (format: file_abc123)'
          example: file_abc123
        filename:
          type: string
          description: Original filename (sanitized)
          example: report.pdf
        size:
          type: integer
          format: int64
          description: File size in bytes
          example: 2457600
        mimeType:
          type: string
          description: MIME type (verified via magic bytes, not client-provided)
          example: application/pdf
        kind:
          allOf:
            - $ref: '#/components/schemas/FileKind'
          description: Inferred file kind
        storagePath:
          type: string
          description: Storage path (internal, not exposed to clients in production)
          example: orgs/org_abc123/files/file_abc123.pdf
        url:
          type: string
          description: Signed URL for file access (time-limited)
          example: https://cdn.example.com/files/file_abc123.pdf?signature=...
        metadata:
          type: object
          additionalProperties:
            type: string
          description: File metadata (user-provided)
        uploadedBy:
          type: string
          description: User ID who uploaded the file
          example: usr_xyz789
        uploadedAt:
          type: string
          format: date-time
          description: Timestamp when the file was uploaded
        virusScanStatus:
          allOf:
            - $ref: '#/components/schemas/VirusScanStatus'
          description: Virus scan status
        virusScanCompletedAt:
          type: string
          format: date-time
          description: Timestamp when virus scan completed
        access:
          allOf:
            - $ref: '#/components/schemas/FileAccess'
          description: Access level
        status:
          allOf:
            - $ref: '#/components/schemas/FileStatus'
          description: File lifecycle status
        isDeleted:
          type: boolean
          description: Whether the file is soft deleted
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when the file was deleted
        deletedBy:
          type: string
          description: User ID who deleted this file
      description: |-
        File resource model

        Represents an uploaded file with metadata, security status, and access info.
    FileAccess:
      type: string
      enum:
        - private
        - public
      description: File access level
    FileDeleteResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            id:
              type: string
              description: ID of the deleted file
            deletedAt:
              type: string
              format: date-time
              description: When the file was deleted
            deletedBy:
              type: string
              description: Who deleted the file
          required:
            - id
            - deletedAt
            - deletedBy
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: File deletion response
    FileKind:
      type: string
      enum:
        - image
        - video
        - audio
        - document
        - archive
        - other
      description: File kind
    FileListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/File'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: File list response with pagination
    FileResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/File'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single file response
    FileStatus:
      type: string
      enum:
        - temporary
        - persistent
      description: File status
    InitiateUploadRequest:
      type: object
      required:
        - filename
        - contentType
        - size
      properties:
        filename:
          type: string
          minLength: 1
          maxLength: 255
          description: Original filename
        contentType:
          type: string
          description: MIME type of the file
          example: application/pdf
        size:
          type: integer
          format: int64
          minimum: 1
          description: File size in bytes
        metadata:
          type: object
          additionalProperties:
            type: string
          description: Optional metadata
      description: Request to initiate a presigned URL upload
    InitiateUploadResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            uploadId:
              type: string
              description: Upload ID for confirmation step
              example: upl_xyz789
            presignedUrl:
              type: string
              description: Presigned URL to upload to
              example: https://s3.amazonaws.com/bucket/key?X-Amz-Algorithm=...
            method:
              type: string
              enum:
                - PUT
              description: HTTP method to use
            headers:
              type: object
              additionalProperties:
                type: string
              description: Required headers for the upload
            expiresAt:
              type: string
              format: date-time
              description: When the presigned URL expires
            maxSize:
              type: integer
              format: int64
              description: Maximum allowed file size
          required:
            - uploadId
            - presignedUrl
            - method
            - headers
            - expiresAt
            - maxSize
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Response with presigned URL for direct upload to storage
    Job:
      type: object
      required:
        - jobId
        - tenantId
        - type
        - status
        - createdBy
        - createdAt
      properties:
        jobId:
          type: string
          description: 'Unique job identifier (format: job_abc123)'
          example: job_abc123
        tenantId:
          type: string
          description: Tenant this job belongs to
          example: org_xyz789
        type:
          type: string
          description: Type of operation (e.g., "report", "import", "export")
          example: report
        status:
          allOf:
            - $ref: '#/components/schemas/JobStatus'
          description: Current job status
        progress:
          type: integer
          format: int32
          minimum: 0
          maximum: 100
          description: Progress percentage (0-100, if available)
        message:
          type: string
          description: Human-readable status message
          example: Processing 150 of 500 records...
        totalItems:
          type: integer
          format: int32
          description: Total items to process
        processedItems:
          type: integer
          format: int32
          description: Items processed so far
        input:
          type: object
          additionalProperties: {}
          description: Job input parameters
        output:
          type: object
          additionalProperties: {}
          description: Job output/result data (when completed)
        metadata:
          allOf:
            - $ref: '#/components/schemas/JobMetadata'
          description: Job metadata (references, format, etc.)
        error:
          allOf:
            - $ref: '#/components/schemas/JobError'
          description: Error details (when failed)
        createdBy:
          type: string
          description: Who initiated the job
          example: usr_123
        createdAt:
          type: string
          format: date-time
          description: When the job was created
        startedAt:
          type: string
          format: date-time
          description: When the job started processing
        completedAt:
          type: string
          format: date-time
          description: When the job completed (success or failure)
        estimatedCompletion:
          type: string
          format: date-time
          description: Estimated completion time (if available)
      description: |-
        Async job resource

        Represents a long-running operation that can be polled for status.
        Unified job system with pg-boss queue integration.
    JobDeliveryMethod:
      type: string
      enum:
        - email
        - download
        - webhook
        - storage
        - none
      description: Generic job delivery method (extends DeliveryMethod with "none" option)
    JobError:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
          example: GENERATION_FAILED
        message:
          type: string
          description: Error message
          example: Failed to connect to data source
        retryable:
          type: boolean
          description: Whether the error is retryable
      description: Job error details
    JobListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Job'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Job list response
    JobMetadata:
      type: object
      properties:
        templateId:
          type: string
          description: Template ID (for report jobs)
        scheduledReportId:
          type: string
          description: Scheduled report ID (for scheduled report jobs)
        format:
          type: string
          description: Format (for report jobs)
        parentJobId:
          type: string
          description: Parent job ID (for retried jobs)
        retryCount:
          type: integer
          format: int32
          description: Retry count
      description: Job metadata for type-specific references
    JobResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Job'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Job status response
    JobStatus:
      type: string
      enum:
        - pending
        - processing
        - completed
        - failed
        - cancelled
      description: Job status
    JobTypeInfo:
      type: object
      required:
        - type
        - label
        - description
      properties:
        type:
          type: string
          description: Job type identifier
          example: report
        label:
          type: string
          description: Human-readable label
          example: Report Generation
        description:
          type: string
          description: Description of what the job does
          example: Generate reports from templates
        configSchema:
          type: string
          description: JSON schema description for configuration
          example: "{ templateId: string, format?: 'xlsx'|'csv'|'pdf' }"
        exampleConfig:
          type: object
          additionalProperties: {}
          description: Example configuration
      description: |-
        Job type information for UI

        Describes a registered job handler's metadata for building
        schedule configuration forms.
    JobTypesListResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/JobTypeInfo'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Job types list response
    LegalDocument:
      type: object
      required:
        - id
        - type
        - slug
        - locale
        - status
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique document identifier
          example: ldoc_abc123
        type:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentType'
          description: Document type
        slug:
          type: string
          description: URL-friendly slug
          example: terms-of-service
        locale:
          type: string
          description: Locale/language code (ISO 639-1)
          example: en
        status:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentStatus'
          description: Current status
        activeVersionId:
          type: string
          description: Currently active version ID (if published)
        createdBy:
          type: string
          description: User who created this document
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
        deletedAt:
          type: string
          format: date-time
          description: Soft delete timestamp
      description: Legal document metadata (container for versions)
    LegalDocumentAcceptance:
      type: object
      required:
        - id
        - userId
        - versionId
        - documentId
        - documentType
        - acceptedAt
      properties:
        id:
          type: string
          description: Unique acceptance identifier
          example: ldacc_def456
        userId:
          type: string
          description: User who accepted
        versionId:
          type: string
          description: Version that was accepted
        documentId:
          type: string
          description: Document ID (denormalized for queries)
        documentType:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentType'
          description: Document type (denormalized for queries)
        acceptedAt:
          type: string
          format: date-time
          description: When the user accepted
        ipAddress:
          type: string
          description: IP address at time of acceptance
          example: 192.168.1.1
        userAgent:
          type: string
          description: User agent string at time of acceptance
      description: User acceptance record for compliance tracking
    LegalDocumentAcceptanceListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/LegalDocumentAcceptance'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Acceptance list response
    LegalDocumentAcceptanceResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/LegalDocumentAcceptance'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Acceptance response
    LegalDocumentAuditLog:
      type: object
      required:
        - id
        - documentId
        - action
        - actorId
        - createdAt
      properties:
        id:
          type: string
          description: Unique log identifier
        documentId:
          type: string
          description: Document ID
        versionId:
          type: string
          description: Version ID (if applicable)
        action:
          type: string
          description: Action performed
          example: version.published
        actorId:
          type: string
          description: User who performed the action
        actorName:
          type: string
          description: Actor name (denormalized)
        changes:
          type: string
          description: JSON of changes made
        createdAt:
          type: string
          format: date-time
          description: Timestamp
      description: Audit log entry for document changes
    LegalDocumentAuditLogListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/LegalDocumentAuditLog'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Audit log list response
    LegalDocumentListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/LegalDocumentWithVersion'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Legal document list response
    LegalDocumentResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/LegalDocument'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single legal document response
    LegalDocumentStatus:
      type: string
      enum:
        - draft
        - published
        - archived
      description: Status of a legal document or version
    LegalDocumentType:
      type: string
      enum:
        - terms_of_service
        - privacy_policy
        - cookie_policy
        - eula
        - community_guidelines
      description: Type of legal document
    LegalDocumentVersion:
      type: object
      required:
        - id
        - documentId
        - version
        - title
        - content
        - status
        - requiresReAcceptance
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique version identifier
          example: ldver_xyz789
        documentId:
          type: string
          description: Parent document ID
        version:
          type: integer
          format: int32
          description: 'Version number (semantic: 1, 2, 3...)'
          example: 1
        title:
          type: string
          description: Version title
          example: Terms of Service v1.0
        content:
          type: string
          description: Full content (Markdown supported)
        changelog:
          type: string
          description: Summary of changes from previous version
        status:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentStatus'
          description: Version status
        publishedAt:
          type: string
          format: date-time
          description: When this version was published
        scheduledAt:
          type: string
          format: date-time
          description: Scheduled publish time (for future publishing)
        requiresReAcceptance:
          type: boolean
          description: Whether users must re-accept when this version is published
        createdBy:
          type: string
          description: User who created this version
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
        archivedAt:
          type: string
          format: date-time
          description: Archive timestamp
      description: Legal document version with content
    LegalDocumentVersionListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/LegalDocumentVersion'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Version list response
    LegalDocumentVersionResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/LegalDocumentVersion'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single version response
    LegalDocumentWithVersion:
      type: object
      required:
        - id
        - type
        - slug
        - locale
        - status
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique document identifier
          example: ldoc_abc123
        type:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentType'
          description: Document type
        slug:
          type: string
          description: URL-friendly slug
          example: terms-of-service
        locale:
          type: string
          description: Locale/language code (ISO 639-1)
          example: en
        status:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentStatus'
          description: Current status
        activeVersionId:
          type: string
          description: Currently active version ID (if published)
        createdBy:
          type: string
          description: User who created this document
        createdAt:
          type: string
          format: date-time
          description: Creation timestamp
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
        deletedAt:
          type: string
          format: date-time
          description: Soft delete timestamp
        activeVersion:
          allOf:
            - $ref: '#/components/schemas/LegalDocumentVersion'
          description: Active version details
        versionCount:
          type: integer
          format: int32
          description: Total version count
      description: Legal document with active version details
    LegalDocumentWithVersionResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/LegalDocumentWithVersion'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Document with version response
    MarkAllReadResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            markedCount:
              type: integer
              format: int32
              description: Number of notifications marked as read
          required:
            - markedCount
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Mark all as read response
    MarkReadResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            announcementId:
              type: string
              description: Announcement ID
            readAt:
              type: string
              format: date-time
              description: Timestamp when read
          required:
            - announcementId
            - readAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Mark as read response
    MarkViewedResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            announcementId:
              type: string
              description: Announcement ID
            viewedAt:
              type: string
              format: date-time
              description: Timestamp when viewed
          required:
            - announcementId
            - viewedAt
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Mark as viewed response
    MigrationStatus:
      type: string
      enum:
        - current
        - deprecated
        - sunset
      description: Version lifecycle status
    MigrationStatusResponse:
      type: object
      required:
        - version
        - status
      properties:
        version:
          type: string
          description: API version (e.g., "v1")
        status:
          allOf:
            - $ref: '#/components/schemas/MigrationStatus'
          description: Version lifecycle status
        sunsetDate:
          type: string
          format: date-time
          description: ISO 8601 date when this version will be removed (if deprecated)
        daysUntilSunset:
          type: integer
          format: int32
          description: Days remaining until sunset (if deprecated)
        replacementVersion:
          type: string
          description: Version to migrate to (if deprecated)
        migrationGuideUrl:
          type: string
          description: URL to the migration guide
        breakingChanges:
          type: array
          items:
            type: string
          description: List of breaking changes in the replacement version
        migrationChecklist:
          type: array
          items:
            type: string
          description: Steps to complete the migration
      description: Migration status for an API version
    MyAcceptancesResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            userId:
              type: string
              description: User ID
            acceptances:
              type: array
              items:
                $ref: '#/components/schemas/LegalDocumentAcceptance'
              description: List of acceptances
          required:
            - userId
            - acceptances
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: User's acceptance history
    Notification:
      type: object
      required:
        - id
        - channel
        - category
        - priority
        - status
        - retryCount
        - maxRetries
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: Unique notification identifier
          example: notif_abc123
        userId:
          type: string
          description: User ID who should receive this notification
          example: usr_xyz789
        channel:
          allOf:
            - $ref: '#/components/schemas/NotificationChannel'
          description: Notification channel
        category:
          allOf:
            - $ref: '#/components/schemas/NotificationCategory'
          description: Notification category
        priority:
          allOf:
            - $ref: '#/components/schemas/NotificationPriority'
          description: Notification priority
        status:
          allOf:
            - $ref: '#/components/schemas/NotificationStatus'
          description: Current notification status
        recipientEmail:
          type: string
          description: Email address this was sent to
        recipientPhone:
          type: string
          description: Phone number this was sent to
        recipientTelegramId:
          type: string
          description: Telegram ID this was sent to
        templateId:
          type: string
          description: Template ID used (if any)
        subject:
          type: string
          description: Subject line (for email)
        body:
          type: string
          description: Plain text body
        bodyHtml:
          type: string
          description: HTML body (for email)
        templateData:
          type: object
          additionalProperties: {}
          description: Template data used for rendering
        campaignId:
          type: string
          description: Campaign ID for bulk sends
        provider:
          type: string
          description: Provider used to send (e.g., "nodemailer", "twilio")
        providerMessageId:
          type: string
          description: Provider's message ID
        sentAt:
          type: string
          format: date-time
          description: Timestamp when notification was sent
        deliveredAt:
          type: string
          format: date-time
          description: Timestamp when notification was delivered
        failedAt:
          type: string
          format: date-time
          description: Timestamp when notification failed
        readAt:
          type: string
          format: date-time
          description: Timestamp when notification was read by user
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when notification was soft deleted
        retryCount:
          type: integer
          format: int32
          description: Number of retry attempts
        maxRetries:
          type: integer
          format: int32
          description: Maximum retry attempts allowed
        nextRetryAt:
          type: string
          format: date-time
          description: Next retry timestamp
        statusMessage:
          type: string
          description: Status message (error details if failed)
        metadata:
          type: object
          additionalProperties: {}
          description: Metadata for custom data
        createdAt:
          type: string
          format: date-time
          description: Timestamp when notification was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when notification was last updated
      description: Notification resource model
    NotificationCategory:
      type: string
      enum:
        - transactional
        - marketing
        - security
        - system
      description: Notification category enum
    NotificationChannel:
      type: string
      enum:
        - email
        - sms
        - whatsapp
        - telegram
        - push
        - none
      description: Notification channel enum
    NotificationListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Notification collection response
    NotificationPreferences:
      type: object
      required:
        - userId
        - emailEnabled
        - smsEnabled
        - whatsappEnabled
        - telegramEnabled
        - pushEnabled
        - marketingEnabled
        - transactionalEnabled
        - securityEnabled
        - systemEnabled
        - quietHoursEnabled
        - createdAt
        - updatedAt
      properties:
        userId:
          type: string
          description: User ID
        emailEnabled:
          type: boolean
          description: Email notifications enabled
        smsEnabled:
          type: boolean
          description: SMS notifications enabled
        whatsappEnabled:
          type: boolean
          description: WhatsApp notifications enabled
        telegramEnabled:
          type: boolean
          description: Telegram notifications enabled
        pushEnabled:
          type: boolean
          description: Push notifications enabled
        marketingEnabled:
          type: boolean
          description: Marketing notifications enabled
        transactionalEnabled:
          type: boolean
          description: Transactional notifications enabled
        securityEnabled:
          type: boolean
          description: Security notifications enabled
        systemEnabled:
          type: boolean
          description: System notifications enabled
        preferredEmail:
          type: string
          nullable: true
          description: Preferred email address
        preferredPhone:
          type: string
          nullable: true
          description: Preferred phone number
        preferredTelegramId:
          type: string
          nullable: true
          description: Preferred Telegram ID
        quietHoursEnabled:
          type: boolean
          description: Quiet hours enabled
        quietHoursStart:
          type: string
          nullable: true
          description: Quiet hours start time (HH:mm format)
        quietHoursEnd:
          type: string
          nullable: true
          description: Quiet hours end time (HH:mm format)
        quietHoursTimezone:
          type: string
          nullable: true
          description: Quiet hours timezone (IANA format)
        createdAt:
          type: string
          format: date-time
          description: Timestamp when created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when last updated
      description: Notification preferences model
    NotificationPreferencesResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/NotificationPreferences'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Notification preferences response
    NotificationPriority:
      type: string
      enum:
        - urgent
        - high
        - normal
        - low
      description: Notification priority enum
    NotificationRecipient:
      type: object
      properties:
        email:
          type: string
          description: Email address (required for email channel)
          example: user@example.com
        phone:
          type: string
          description: Phone number in E.164 format (required for SMS/WhatsApp)
          example: '+1234567890'
        telegramId:
          type: string
          description: Telegram chat ID (required for Telegram channel)
          example: '123456789'
      description: Notification recipient information
    NotificationResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Notification'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single notification response
    NotificationStatus:
      type: string
      enum:
        - pending
        - queued
        - processing
        - sent
        - delivered
        - failed
        - bounced
      description: Notification status enum
    Pagination:
      type: object
      required:
        - page
        - pageSize
        - totalPages
        - totalCount
        - hasNext
        - hasPrevious
      properties:
        page:
          type: integer
          format: int32
          description: Current page number (1-indexed)
        pageSize:
          type: integer
          format: int32
          description: Number of items per page
        totalPages:
          type: integer
          format: int32
          description: Total number of pages
        totalCount:
          type: integer
          format: int32
          description: Total number of items across all pages
        hasNext:
          type: boolean
          description: Whether there is a next page
        hasPrevious:
          type: boolean
          description: Whether there is a previous page
        links:
          allOf:
            - $ref: '#/components/schemas/PaginationLinks'
          description: Navigation links for pagination
        requestedPageSize:
          type: integer
          format: int32
          description: Original requested page size (included if pageSize was capped)
      description: Page-based pagination metadata for collection responses
    PaginationLinks:
      type: object
      required:
        - first
        - previous
        - next
        - last
      properties:
        first:
          type: string
          nullable: true
          description: URL for the first page
        previous:
          type: string
          nullable: true
          description: URL for the previous page (null if on first page)
        next:
          type: string
          nullable: true
          description: URL for the next page (null if on last page)
        last:
          type: string
          nullable: true
          description: URL for the last page
      description: Pagination links for navigating through paginated results
    PendingAcceptancesResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            hasPending:
              type: boolean
              description: Whether there are documents requiring acceptance
            pendingDocuments:
              type: array
              items:
                $ref: '#/components/schemas/LegalDocumentWithVersion'
              description: List of documents requiring acceptance
          required:
            - hasPending
            - pendingDocuments
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Check for pending acceptances
    Permission:
      type: object
      required:
        - resource
        - action
        - effect
      properties:
        resource:
          type: string
          description: Resource identifier (e.g., "users", "invoices", "settings")
          example: documents
        action:
          anyOf:
            - $ref: '#/components/schemas/PermissionAction'
            - type: string
          description: Action to perform on the resource
          example: update
        effect:
          allOf:
            - $ref: '#/components/schemas/PermissionEffect'
          description: Whether to allow or deny this action
        condition:
          allOf:
            - $ref: '#/components/schemas/PermissionCondition'
          description: Optional condition for when this permission applies
      description: |-
        Permission definition

        Permissions define what actions can be performed on resources.
        They support allow/deny effects and optional conditions.
    PermissionAction:
      type: string
      enum:
        - read
        - create
        - update
        - delete
        - manage
        - '*'
      description: Permission actions
    PermissionCondition:
      type: string
      enum:
        - ''
        - owner
        - shared
      description: |-
        Permission condition - when the permission applies

        Conditions enable dynamic, context-aware access control.
    PermissionEffect:
      type: string
      enum:
        - allow
        - deny
      description: |-
        Permission effect - whether to allow or deny access

        When a user has multiple roles, permissions are combined:
        - If ANY role denies an action, it is denied (deny wins)
        - If no role denies and ANY role allows, it is allowed
        - If no rules match, access is denied (default deny)
    PermissionInput:
      type: object
      required:
        - resource
        - action
      properties:
        resource:
          type: string
          description: Resource identifier
        action:
          type: string
          description: Action to perform
        effect:
          allOf:
            - $ref: '#/components/schemas/PermissionEffect'
          description: Effect (defaults to "allow" if not specified)
        condition:
          allOf:
            - $ref: '#/components/schemas/PermissionCondition'
          description: Optional condition
      description: Permission input for creating/updating roles
    PlanBillingPeriod:
      type: string
      enum:
        - monthly
        - yearly
      description: Billing period for subscription plans
    PlanFeatures:
      type: object
      properties:
        maxUsers:
          type: integer
          format: int32
          description: Maximum users allowed (-1 = unlimited)
        maxLocations:
          type: integer
          format: int32
          description: Maximum locations allowed (-1 = unlimited)
        maxStorageGb:
          type: integer
          format: int32
          description: Maximum storage in GB (-1 = unlimited)
        advancedReporting:
          type: boolean
          description: Access to advanced reporting
        apiAccess:
          type: boolean
          description: API access enabled
        customBranding:
          type: boolean
          description: Custom branding enabled
        prioritySupport:
          type: boolean
          description: Priority support
      description: Plan feature configuration
    PlanListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SubscriptionPlan'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Subscription plan list response
    PlanResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/SubscriptionPlan'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Subscription plan response
    PlanVisibility:
      type: string
      enum:
        - public
        - private
        - archived
      description: Plan visibility level
    PreviewEmailRequest:
      type: object
      required:
        - templateId
      properties:
        templateId:
          type: string
          description: Template ID to preview
          example: welcome
        templateData:
          type: object
          additionalProperties: {}
          description: Data for template rendering
      description: Request body for previewing an email template
    PreviewEmailResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            html:
              type: string
              description: Rendered HTML content
            text:
              type: string
              description: Rendered plain text content
            subject:
              type: string
              description: Email subject
          required:
            - html
            - text
            - subject
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Email preview response
    PublishVersionRequest:
      type: object
      properties:
        scheduledAt:
          type: string
          format: date-time
          description: Schedule for future (optional)
      description: Publish a version
    ReportColumnConfig:
      type: object
      required:
        - id
        - header
      properties:
        id:
          type: string
          description: Column identifier
        header:
          type: string
          description: Display header text
        accessorKey:
          type: string
          description: Property key to access data (e.g., "user.name")
        accessorFn:
          type: string
          description: Custom accessor function (JavaScript expression)
        width:
          type: integer
          format: int32
          description: Column width in pixels
        align:
          allOf:
            - $ref: '#/components/schemas/ColumnAlignment'
          description: Text alignment
        format:
          allOf:
            - $ref: '#/components/schemas/ColumnFormat'
          description: Data format type
        formatPattern:
          type: string
          description: Custom format pattern (e.g., "yyyy-MM-dd" for dates)
        hidden:
          type: boolean
          description: Whether column is hidden by default
      description: Column configuration for reports
    ReportFormat:
      type: string
      enum:
        - csv
        - excel
        - pdf
        - thermal
        - dotmatrix
      description: Report output format
    ReportOptions:
      type: object
      properties:
        delimiter:
          type: string
          description: CSV delimiter character
        includeHeaders:
          type: boolean
          description: Include header row in CSV
        sheetName:
          type: string
          description: Excel sheet name
        autoFilter:
          type: boolean
          description: Enable auto-filter in Excel
        freezeHeader:
          type: boolean
          description: Freeze header row in Excel
        orientation:
          allOf:
            - $ref: '#/components/schemas/ReportOrientation'
          description: Page orientation for PDF
        pageSize:
          allOf:
            - $ref: '#/components/schemas/ReportPageSize'
          description: Page size for PDF
        marginTop:
          type: integer
          format: int32
          description: Top margin in mm
        marginRight:
          type: integer
          format: int32
          description: Right margin in mm
        marginBottom:
          type: integer
          format: int32
          description: Bottom margin in mm
        marginLeft:
          type: integer
          format: int32
          description: Left margin in mm
        title:
          type: string
          description: Report title (displayed at top)
        subtitle:
          type: string
          description: Report subtitle
        watermark:
          type: string
          description: Watermark text
        includePageNumbers:
          type: boolean
          description: Include page numbers
        includeTimestamp:
          type: boolean
          description: Include generation timestamp
        printerWidth:
          type: integer
          format: int32
          description: Printer paper width (58mm or 80mm)
        encoding:
          type: string
          description: Character encoding
        autoCut:
          type: boolean
          description: Cut paper after printing
      description: Report format-specific options
    ReportOrientation:
      type: string
      enum:
        - portrait
        - landscape
      description: Page orientation for PDF reports
    ReportPageSize:
      type: string
      enum:
        - a4
        - letter
        - legal
        - a3
      description: Page size for PDF reports
    ReportTemplate:
      type: object
      required:
        - id
        - orgId
        - name
        - format
        - templateEngine
        - templateContent
        - columns
        - isPublic
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique template identifier (format: tpl_{randomString})'
          example: tpl_abc123xyz
        orgId:
          type: string
          description: Organization ID (tenant scope)
          example: org_xyz789
        name:
          type: string
          description: Template name
          example: Monthly Sales Report
        description:
          type: string
          description: Template description
          example: Summarizes sales data by product category
        format:
          allOf:
            - $ref: '#/components/schemas/ReportFormat'
          description: Output format
        templateEngine:
          type: string
          description: Template engine (currently only eta supported)
          example: eta
        templateContent:
          type: string
          description: Template content (Eta template string)
          example: <% it.data.forEach(row => { %><%= row.name %><% }) %>
        options:
          allOf:
            - $ref: '#/components/schemas/ReportOptions'
          description: Format-specific options
        dataSource:
          allOf:
            - $ref: '#/components/schemas/DataSourceConfig'
          description: Data source configuration
        columns:
          type: array
          items:
            $ref: '#/components/schemas/ReportColumnConfig'
          description: Column definitions
        isPublic:
          type: boolean
          description: Whether template is visible to all org members
        createdBy:
          type: string
          description: User ID who created the template
          example: usr_creator123
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the template was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the template was last updated
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when the template was soft deleted (null if not deleted)
      description: |-
        Report Template resource model

        Defines reusable report configurations with:
        - Multiple output formats (CSV, Excel, PDF, Thermal, Dot-Matrix)
        - Eta template engine for custom layouts
        - Column definitions with formatting
        - Data source configuration
        - Multi-tenant scoping
    ReportTemplateListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ReportTemplate'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Report template collection response (page-based)
    ReportTemplateResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ReportTemplate'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single report template response
    ResponseMeta:
      type: object
      required:
        - requestId
        - timestamp
      properties:
        requestId:
          type: string
          description: Unique request identifier for tracking and debugging
        timestamp:
          type: string
          format: date-time
          description: Timestamp when the response was generated
        apiVersion:
          type: string
          description: API version used for this request
        tenantId:
          type: string
          description: Tenant/organization ID for multi-tenant requests
        tenantName:
          type: string
          description: Tenant/organization name for multi-tenant requests
        durationMs:
          type: integer
          format: int32
          description: Processing time in milliseconds
      description: Response metadata included in all API responses
    Role:
      type: object
      required:
        - id
        - applicationId
        - name
        - permissions
        - isSystemRole
        - isGlobalRole
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique role identifier (format: role_abc123)'
          example: role_admin
        applicationId:
          type: string
          description: Application this role belongs to
          example: app_default
        tenantId:
          type: string
          description: Tenant this role belongs to (null for global roles)
          example: org_abc123
        name:
          type: string
          description: Role name
          example: Admin
        description:
          type: string
          description: Role description
          example: Full administrative access
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/Permission'
          description: Permissions granted by this role
        isSystemRole:
          type: boolean
          description: Whether this is a system-defined role (cannot be deleted or renamed)
        isGlobalRole:
          type: boolean
          description: Whether this is a global role (tenantId is null)
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the role was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the role was last updated
        createdBy:
          type: string
          description: User who created this role
          example: usr_owner
      description: |-
        Role resource model

        Roles can be:
        - **Global roles**: App-scoped (tenantId is null), apply across all tenants
        - **Tenant roles**: Scoped to a specific organization

        Users can have multiple roles, and permissions are combined with
        deny-override semantics.
    RoleListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Role'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Role list response
    RoleResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Role'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single role response
    ScheduleFrequency:
      type: string
      enum:
        - once
        - daily
        - weekly
        - monthly
        - custom
      description: |-
        ============================================================================
        SCHEDULE COMMON TYPES
        ============================================================================

        Shared types used by both scheduled reports and scheduled jobs.
        These types are generic and can be used for any scheduled operation.
        ============================================================================Schedule frequency
    ScheduledJob:
      type: object
      required:
        - id
        - orgId
        - jobType
        - name
        - frequency
        - timezone
        - startDate
        - deliveryMethod
        - isActive
        - failureCount
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique schedule identifier (format: sched_{randomString})'
          example: sched_abc123xyz
        orgId:
          type: string
          description: Organization ID (tenant scope)
          example: org_xyz789
        jobType:
          type: string
          description: Job type to run (e.g., "report", "export", "import", "custom-job")
          example: report
        jobConfig:
          type: object
          additionalProperties: {}
          description: Job configuration passed to the job handler (e.g., templateId, parameters)
        name:
          type: string
          description: Schedule name
          example: Weekly Sales Summary
        description:
          type: string
          description: Schedule description
          example: Runs weekly sales report every Monday morning
        frequency:
          allOf:
            - $ref: '#/components/schemas/ScheduleFrequency'
          description: Schedule frequency
        cronExpression:
          type: string
          description: Cron expression (required when frequency is custom)
          example: 0 9 * * MON
        dayOfWeek:
          allOf:
            - $ref: '#/components/schemas/DayOfWeek'
          description: Day of week (for weekly frequency)
        dayOfMonth:
          type: integer
          format: int32
          description: Day of month (for monthly frequency, 1-28)
        hour:
          type: integer
          format: int32
          description: Hour to run (0-23)
          example: 9
        minute:
          type: integer
          format: int32
          description: Minute to run (0-59)
          example: 0
        timezone:
          type: string
          description: Timezone for scheduling
          example: America/New_York
        startDate:
          type: string
          format: date-time
          description: Start date for the schedule
        endDate:
          type: string
          format: date-time
          description: End date for the schedule (null = runs indefinitely)
        deliveryMethod:
          allOf:
            - $ref: '#/components/schemas/JobDeliveryMethod'
          description: Delivery method for job results
        deliveryConfig:
          allOf:
            - $ref: '#/components/schemas/DeliveryConfig'
          description: Delivery configuration
        isActive:
          type: boolean
          description: Whether the schedule is active
        lastRunAt:
          type: string
          format: date-time
          description: Timestamp of last successful run
        nextRunAt:
          type: string
          format: date-time
          description: Timestamp of next scheduled run
        failureCount:
          type: integer
          format: int32
          description: Number of consecutive failures
        lastJobId:
          type: string
          description: Last job ID created by this schedule
        createdBy:
          type: string
          description: User ID who created the schedule
          example: usr_creator123
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the schedule was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the schedule was last updated
        deletedAt:
          type: string
          format: date-time
          description: Timestamp when the schedule was soft deleted
      description: |-
        Scheduled Job resource model

        Defines automated job execution with:
        - Flexible scheduling (daily, weekly, monthly, custom cron)
        - Multiple delivery methods (email, webhook, storage)
        - Generic job type support (report, export, import, custom)
        - Multi-tenant scoping
    ScheduledJobHistoryResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            scheduleId:
              type: string
              description: Schedule ID
            jobs:
              type: array
              items:
                type: object
                properties:
                  jobId:
                    type: string
                    description: Job ID
                  status:
                    type: string
                    description: Job status
                  createdAt:
                    type: string
                    description: When the job was created
                  completedAt:
                    type: string
                    description: When the job completed
                  success:
                    type: boolean
                    description: Whether the job succeeded
                  error:
                    type: string
                    description: Error message if failed
                required:
                  - jobId
                  - status
                  - createdAt
                  - success
              description: Jobs created by this schedule
          required:
            - scheduleId
            - jobs
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Scheduled job run history response
    ScheduledJobListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/ScheduledJob'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Scheduled job collection response (page-based)
    ScheduledJobResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/ScheduledJob'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Single scheduled job response
    SendNotificationRequest:
      type: object
      required:
        - channel
        - category
        - recipient
      properties:
        channel:
          allOf:
            - $ref: '#/components/schemas/NotificationChannel'
          description: Notification channel
        category:
          allOf:
            - $ref: '#/components/schemas/NotificationCategory'
          description: Notification category
        priority:
          allOf:
            - $ref: '#/components/schemas/NotificationPriority'
          description: 'Notification priority (default: normal)'
        recipient:
          allOf:
            - $ref: '#/components/schemas/NotificationRecipient'
          description: Recipient information
        templateId:
          type: string
          description: Template ID to use for rendering
          example: welcome-email
        templateData:
          type: object
          additionalProperties: {}
          description: Data for template rendering
        subject:
          type: string
          description: Subject line (for email, required if not using template)
          example: Welcome to our platform
        body:
          type: string
          description: Plain text body (required if not using template)
          example: Thank you for signing up!
        bodyHtml:
          type: string
          description: HTML body (for email)
        metadata:
          type: object
          additionalProperties: {}
          description: Custom metadata
      description: Request body for sending a notification
    SendNotificationResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            messageId:
              type: string
              description: Message ID assigned to the notification
            provider:
              type: string
              description: Provider used to send
          required:
            - messageId
            - provider
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Send notification success response
    SoftDeleteResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            id:
              type: string
              description: ID of the deleted resource
            deletedAt:
              type: string
              format: date-time
              description: Timestamp when the resource was soft deleted
            deletedBy:
              type: string
              description: User ID who performed the deletion
            deletionReason:
              type: string
              description: Reason for deletion (optional, from request)
            canRestore:
              type: boolean
              description: Whether the resource can be restored
            restoreUntil:
              type: string
              format: date-time
              description: Deadline for restoration (after which hard delete may occur)
          required:
            - id
            - deletedAt
            - deletedBy
            - canRestore
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: |-
        Response for soft delete operations

        Includes resource ID, deletion metadata, and restore information
    StorageDeliveryConfig:
      type: object
      required:
        - pathTemplate
      properties:
        pathTemplate:
          type: string
          description: Storage path template (supports variables like {{date}}, {{name}})
          example: /reports/{{year}}/{{month}}/{{name}}-{{date}}.csv
        provider:
          type: string
          description: Storage provider (local, s3, etc.)
        bucket:
          type: string
          description: Storage bucket (for cloud providers)
      description: Storage delivery configuration
    StorageDeliveryConfigUpdate:
      type: object
      properties:
        pathTemplate:
          type: string
          description: Storage path template (supports variables like {{date}}, {{name}})
          example: /reports/{{year}}/{{month}}/{{name}}-{{date}}.csv
        provider:
          type: string
          description: Storage provider (local, s3, etc.)
        bucket:
          type: string
          description: Storage bucket (for cloud providers)
      description: Storage delivery configuration
    StreamExportRequest:
      type: object
      required:
        - format
      properties:
        templateId:
          type: string
          description: Report template ID
        format:
          type: string
          enum:
            - csv
            - excel
          description: Output format (only csv and excel supported)
        filters:
          type: object
          additionalProperties: {}
          description: Filters to apply
        sort:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              direction:
                type: string
                enum:
                  - asc
                  - desc
            required:
              - field
              - direction
          description: Sort configuration
        batchSize:
          type: integer
          format: int32
          description: Batch size for streaming
      description: Request body for streaming export
    Subscription:
      type: object
      required:
        - id
        - organizationId
        - applicationId
        - planId
        - status
        - currentPeriodStart
        - currentPeriodEnd
        - cancelAtPeriodEnd
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique subscription identifier (format: sub_abc123)'
          example: sub_abc123
        organizationId:
          type: string
          description: Organization ID
          example: org_xyz789
        applicationId:
          type: string
          description: Application ID
          example: app_main
        planId:
          type: string
          description: Current plan ID
          example: plan_basic_monthly
        status:
          allOf:
            - $ref: '#/components/schemas/SubscriptionStatus'
          description: Subscription status
        trialStartsAt:
          type: string
          format: date-time
          description: Trial start date
        trialEndsAt:
          type: string
          format: date-time
          description: Trial end date
        currentPeriodStart:
          type: string
          format: date-time
          description: Current billing period start
        currentPeriodEnd:
          type: string
          format: date-time
          description: Current billing period end
        couponId:
          type: string
          description: Applied coupon ID
          example: coupon_launch50
        discountPercent:
          type: integer
          format: int32
          minimum: 0
          maximum: 100
          description: Discount percentage (for percent coupons)
          example: 20
        discountAmountCents:
          type: integer
          format: int32
          minimum: 0
          description: Discount amount in cents (for fixed coupons)
          example: 50000
        cancelAtPeriodEnd:
          type: boolean
          description: Cancel at end of current period
        canceledAt:
          type: string
          format: date-time
          description: When subscription was canceled
        providerSubscriptionId:
          type: string
          description: Payment provider subscription ID (Xendit, Stripe, etc.)
        providerCustomerId:
          type: string
          description: Payment provider customer ID
        createdAt:
          type: string
          format: date-time
          description: When the subscription was created
        updatedAt:
          type: string
          format: date-time
          description: When the subscription was last updated
        plan:
          allOf:
            - $ref: '#/components/schemas/SubscriptionPlan'
          description: Nested plan details (populated when requested)
      description: |-
        Organization subscription

        Represents an active subscription for an organization.
    SubscriptionPlan:
      type: object
      required:
        - id
        - applicationId
        - name
        - slug
        - priceCents
        - currency
        - billingPeriod
        - visibility
        - isActive
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique plan identifier (format: plan_basic_monthly)'
          example: plan_basic_monthly
        applicationId:
          type: string
          description: Application this plan belongs to
          example: app_main
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Plan display name
          example: Professional
        slug:
          type: string
          minLength: 1
          maxLength: 50
          description: URL-friendly slug
          example: professional
        description:
          type: string
          maxLength: 500
          description: Plan description
          example: Perfect for growing teams
        priceCents:
          type: integer
          format: int32
          minimum: 0
          description: Price in smallest currency unit (cents for USD, sen for IDR)
          example: 100000
        currency:
          type: string
          description: Currency code
          example: IDR
        billingPeriod:
          allOf:
            - $ref: '#/components/schemas/PlanBillingPeriod'
          description: Billing period
        trialDays:
          type: integer
          format: int32
          minimum: 0
          description: Trial period in days (0 = no trial)
          example: 14
        features:
          allOf:
            - $ref: '#/components/schemas/PlanFeatures'
          description: Plan features and limits
        metadata:
          type: object
          additionalProperties: {}
          nullable: true
          description: Additional metadata
        sortOrder:
          type: integer
          format: int32
          description: Sort order for display
          example: 1
        visibility:
          allOf:
            - $ref: '#/components/schemas/PlanVisibility'
          description: Visibility level
        isActive:
          type: boolean
          description: Whether plan is active
        isPopular:
          type: boolean
          description: Whether to show "Popular" badge
        createdAt:
          type: string
          format: date-time
          description: When the plan was created
        updatedAt:
          type: string
          format: date-time
          description: When the plan was last updated
      description: |-
        Subscription plan

        Represents a pricing tier with features and limits.
    SubscriptionResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Subscription'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Subscription response
    SubscriptionStatus:
      type: string
      enum:
        - trialing
        - active
        - past_due
        - canceled
        - paused
        - expired
      description: Subscription status
    SwitchContextRequest:
      type: object
      properties:
        applicationId:
          type: string
          description: Target application ID (optional, defaults to current)
        tenantId:
          type: string
          description: Target tenant ID (optional, null to clear tenant context)
      description: Request to switch active context (application and/or tenant)
    SwitchContextResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            applicationId:
              type: string
              description: New active application ID
            tenantId:
              type: string
              description: New active tenant ID (null if no tenant)
            tenantName:
              type: string
              description: Tenant name (if tenant selected)
            roles:
              type: array
              items:
                type: string
              description: Roles in the new context
            permissions:
              type: array
              items:
                $ref: '#/components/schemas/Permission'
              description: Effective permissions in the new context
          required:
            - applicationId
            - roles
            - permissions
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Context switch response
    SystemOrganization:
      type: object
      required:
        - id
        - name
        - slug
        - logo
        - createdAt
        - metadata
      properties:
        id:
          type: string
          description: Organization ID
        name:
          type: string
          description: Organization name
        slug:
          type: string
          description: Organization slug
        logo:
          type: string
          nullable: true
          description: Organization logo URL
        createdAt:
          type: string
          description: Creation date
        metadata:
          type: string
          nullable: true
          description: Metadata (JSON string or object)
      description: System organization model
    SystemOrganizationListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/SystemOrganization'
          description: Array of resources
        pagination:
          allOf:
            - $ref: '#/components/schemas/Pagination'
          description: Pagination information
        warnings:
          type: array
          items:
            $ref: '#/components/schemas/Warning'
          description: Non-fatal warnings (e.g., deprecation notices)
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: List of system organizations response
    SystemOrganizationResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/SystemOrganization'
          description: The resource data
        warnings:
          type: array
          items:
            $ref: '#/components/schemas/Warning'
          description: Non-fatal warnings (e.g., deprecation notices)
        meta:
          allOf:
            - $ref: '#/components/schemas/ResponseMeta'
          description: Response metadata
      description: System organization response
    UnreadAnnouncementsResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            unreadCount:
              type: integer
              format: int32
              description: Number of unread announcements
            criticalCount:
              type: integer
              format: int32
              description: Number of critical announcements requiring acknowledgment
          required:
            - unreadCount
            - criticalCount
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Unread announcement count response
    UnreadCountResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            unreadCount:
              type: integer
              format: int32
              description: Number of unread notifications
          required:
            - unreadCount
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Unread count response
    UpdateAnnouncementRequest:
      type: object
      properties:
        orgId:
          type: string
          nullable: true
          description: Organization ID (null for system-wide announcements visible to all organizations)
        scope:
          allOf:
            - $ref: '#/components/schemas/AnnouncementScope'
          description: Scope (system or organization)
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: Announcement title
        content:
          type: string
          minLength: 1
          maxLength: 5000
          description: Announcement content (supports Markdown for links, formatting, and equations)
        linkUrl:
          type: string
          maxLength: 2000
          description: Optional link URL
        linkText:
          type: string
          maxLength: 50
          description: Optional link text
        priority:
          allOf:
            - $ref: '#/components/schemas/AnnouncementPriority'
          description: Priority level
        targetRoles:
          type: array
          items:
            $ref: '#/components/schemas/AnnouncementTargetRole'
          description: Target roles
        isDismissible:
          type: boolean
          description: Whether users can dismiss
        publishAt:
          type: string
          format: date-time
          description: Scheduled publish date/time
        expiresAt:
          type: string
          format: date-time
          description: Optional expiration date/time
        isActive:
          type: boolean
          description: Whether announcement is active
      description: Request body for updating an announcement
    UpdateCouponRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 200
          description: Internal name
        percentOff:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Percentage off
        amountOffCents:
          type: integer
          format: int32
          minimum: 1
          description: Amount off in cents
        trialExtensionDays:
          type: integer
          format: int32
          minimum: 1
          description: Trial extension days
        isActive:
          type: boolean
          description: Is active
        startsAt:
          type: string
          format: date-time
          description: Validity start
        expiresAt:
          type: string
          format: date-time
          description: Validity end
        maxRedemptions:
          type: integer
          format: int32
          minimum: 1
          description: Max redemptions
        firstTimeOnly:
          type: boolean
          description: First-time only
        planIds:
          type: string
          description: Plan IDs (comma-separated)
      description: Update coupon request
    UpdateExampleCommentRequest:
      type: object
      properties:
        content:
          type: string
          description: Comment content (optional)
      description: Request body for updating a comment
    UpdateExamplePostRequest:
      type: object
      properties:
        title:
          type: string
          description: Post title (optional)
        content:
          type: string
          description: Post content (optional)
        category:
          type: string
          description: Post category
        tags:
          type: array
          items:
            type: string
          description: Post tags
        isFeatured:
          type: boolean
          description: Whether the post is featured
        publishDate:
          type: string
          format: date-time
          description: Scheduled publish date
        coverImageId:
          type: string
          description: Cover image file ID
        attachmentFileId:
          type: string
          description: Attachment file ID
        galleryImageIds:
          type: array
          items:
            type: string
          description: Gallery images (file IDs)
        documentFileIds:
          type: array
          items:
            type: string
          description: Attached documents (file IDs)
        status:
          allOf:
            - $ref: '#/components/schemas/ExamplePostStatus'
          description: Post status (optional)
      description: Request body for updating a post
    UpdateFileRequest:
      type: object
      properties:
        access:
          allOf:
            - $ref: '#/components/schemas/FileAccess'
          description: New access level
      description: Request to update file properties
    UpdateLegalDocumentRequest:
      type: object
      properties:
        slug:
          type: string
          minLength: 1
          maxLength: 100
          description: URL-friendly slug
        locale:
          type: string
          minLength: 2
          maxLength: 10
          description: Locale/language code
      description: Update document metadata
    UpdateLegalDocumentVersionRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: Version title
        content:
          type: string
          minLength: 1
          description: Full content
        changelog:
          type: string
          maxLength: 2000
          description: Summary of changes
        requiresReAcceptance:
          type: boolean
          description: Whether users must re-accept
      description: Update a draft version
    UpdatePlanRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Plan name
        slug:
          type: string
          minLength: 1
          maxLength: 50
          description: Plan slug
        description:
          type: string
          maxLength: 500
          description: Plan description
        priceCents:
          type: integer
          format: int32
          minimum: 0
          description: Price in cents
        currency:
          type: string
          description: Currency code
        billingPeriod:
          allOf:
            - $ref: '#/components/schemas/PlanBillingPeriod'
          description: Billing period
        trialDays:
          type: integer
          format: int32
          minimum: 0
          description: Trial days
        features:
          allOf:
            - $ref: '#/components/schemas/PlanFeatures'
          description: Features
        metadata:
          type: object
          additionalProperties: {}
          description: Metadata
        sortOrder:
          type: integer
          format: int32
          description: Sort order
        visibility:
          allOf:
            - $ref: '#/components/schemas/PlanVisibility'
          description: Visibility
        isActive:
          type: boolean
          description: Is active
        isPopular:
          type: boolean
          description: Is popular
      description: Update subscription plan request
    UpdatePreferencesRequest:
      type: object
      properties:
        emailEnabled:
          type: boolean
          description: Email notifications enabled
        smsEnabled:
          type: boolean
          description: SMS notifications enabled
        whatsappEnabled:
          type: boolean
          description: WhatsApp notifications enabled
        telegramEnabled:
          type: boolean
          description: Telegram notifications enabled
        pushEnabled:
          type: boolean
          description: Push notifications enabled
        marketingEnabled:
          type: boolean
          description: Marketing notifications enabled
        transactionalEnabled:
          type: boolean
          description: Transactional notifications enabled
        securityEnabled:
          type: boolean
          description: Security notifications enabled
        systemEnabled:
          type: boolean
          description: System notifications enabled
        preferredEmail:
          type: string
          description: Preferred email address
        preferredPhone:
          type: string
          description: Preferred phone number
        preferredTelegramId:
          type: string
          description: Preferred Telegram ID
        quietHoursEnabled:
          type: boolean
          description: Quiet hours enabled
        quietHoursStart:
          type: string
          description: Quiet hours start time (HH:mm format)
        quietHoursEnd:
          type: string
          description: Quiet hours end time (HH:mm format)
        quietHoursTimezone:
          type: string
          description: Quiet hours timezone (IANA format)
      description: Request body for updating notification preferences
    UpdateReportTemplateRequest:
      type: object
      properties:
        name:
          type: string
          description: Template name
        description:
          type: string
          description: Template description
        format:
          allOf:
            - $ref: '#/components/schemas/ReportFormat'
          description: Output format
        templateContent:
          type: string
          description: Template content
        options:
          allOf:
            - $ref: '#/components/schemas/ReportOptions'
          description: Format-specific options
        dataSource:
          allOf:
            - $ref: '#/components/schemas/DataSourceConfigUpdate'
          description: Data source configuration
        columns:
          type: array
          items:
            $ref: '#/components/schemas/ReportColumnConfig'
          description: Column definitions
        isPublic:
          type: boolean
          description: Whether template is visible to all org members
      description: Request body for updating a report template
    UpdateRoleRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Role name
        description:
          type: string
          maxLength: 500
          description: Role description
        permissions:
          type: array
          items:
            $ref: '#/components/schemas/PermissionInput'
          description: Permissions to grant (replaces existing permissions)
      description: Request to update a role
    UpdateScheduledJobRequest:
      type: object
      properties:
        jobType:
          type: string
          description: Job type to run
        jobConfig:
          type: object
          additionalProperties: {}
          description: Job configuration passed to the job handler
        name:
          type: string
          description: Schedule name
        description:
          type: string
          description: Schedule description
        frequency:
          allOf:
            - $ref: '#/components/schemas/ScheduleFrequency'
          description: Schedule frequency
        cronExpression:
          type: string
          description: Cron expression
        dayOfWeek:
          allOf:
            - $ref: '#/components/schemas/DayOfWeek'
          description: Day of week
        dayOfMonth:
          type: integer
          format: int32
          description: Day of month
        hour:
          type: integer
          format: int32
          description: Hour to run
        minute:
          type: integer
          format: int32
          description: Minute to run
        timezone:
          type: string
          description: Timezone
        startDate:
          type: string
          format: date-time
          description: Start date
        endDate:
          type: string
          format: date-time
          description: End date
        deliveryMethod:
          allOf:
            - $ref: '#/components/schemas/JobDeliveryMethod'
          description: Delivery method
        deliveryConfig:
          allOf:
            - $ref: '#/components/schemas/DeliveryConfigUpdate'
          description: Delivery configuration
        isActive:
          type: boolean
          description: Whether the schedule is active
      description: Request body for updating a scheduled job
    UpdateSubscriptionRequest:
      type: object
      properties:
        planId:
          type: string
          description: New plan ID (for upgrade/downgrade)
          example: plan_pro_monthly
        cancelAtPeriodEnd:
          type: boolean
          description: Cancel at end of period
      description: Update subscription request
    UpdateSystemOrganizationRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        logo:
          type: string
          nullable: true
        metadata:
          type: string
          nullable: true
      description: Request to update a system organization
    UpdateWebhookRequest:
      type: object
      properties:
        url:
          type: string
          format: uri
          description: URL to receive webhook payloads
        name:
          type: string
          maxLength: 100
          description: Human-readable name
        description:
          type: string
          maxLength: 500
          description: Description
        events:
          type: array
          items:
            type: string
          description: Event types to subscribe to
        isActive:
          type: boolean
          description: Whether the webhook is active
      description: Request to update a webhook
    UserContext:
      type: object
      required:
        - applicationId
        - applicationName
        - tenantId
        - tenantName
        - roles
      properties:
        applicationId:
          type: string
          description: Application ID
          example: app_default
        applicationName:
          type: string
          description: Application name
          example: My SaaS Platform
        tenantId:
          type: string
          description: Tenant ID
          example: org_abc123
        tenantName:
          type: string
          description: Tenant name
          example: Acme Corp
        roles:
          type: array
          items:
            type: string
          description: Role names in this context
          example:
            - admin
            - billing_manager
      description: User's context across applications and tenants
    UserContextListResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/UserContext'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: User available contexts response (all apps/tenants user belongs to)
    UserEffectivePermissions:
      type: object
      required:
        - userId
        - applicationId
        - globalRoles
        - tenantRoles
        - effectivePermissions
        - allowedActions
      properties:
        userId:
          type: string
          description: User ID
          example: usr_123
        applicationId:
          type: string
          description: Application ID
          example: app_default
        tenantId:
          type: string
          description: Tenant ID (context for permission calculation)
          example: org_abc123
        globalRoles:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: Role ID
              name:
                type: string
                description: Role name
              permissions:
                type: array
                items:
                  $ref: '#/components/schemas/Permission'
                description: Permissions from this role
            required:
              - id
              - name
              - permissions
          description: Global roles (app-scoped, no tenant)
        tenantRoles:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: Role ID
              name:
                type: string
                description: Role name
              permissions:
                type: array
                items:
                  $ref: '#/components/schemas/Permission'
                description: Permissions from this role
            required:
              - id
              - name
              - permissions
          description: Tenant-specific roles
        effectivePermissions:
          type: array
          items:
            $ref: '#/components/schemas/Permission'
          description: Combined effective permissions (after deny-override resolution)
        allowedActions:
          type: array
          items:
            type: string
          description: Simple list of allowed actions (for quick checks)
          example:
            - users:read
            - users:update
            - documents:read
            - documents:update:owner
      description: |-
        User's effective permissions

        Represents the combined permissions from all roles assigned to a user
        within a specific application and tenant context.
    UserEffectivePermissionsResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/UserEffectivePermissions'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: User effective permissions response
    UserRoleAssignment:
      type: object
      required:
        - id
        - userId
        - applicationId
        - roleId
        - roleName
        - isGlobalRole
        - assignedAt
      properties:
        id:
          type: string
          description: Assignment ID
          example: ura_abc123
        userId:
          type: string
          description: User ID
          example: usr_123
        applicationId:
          type: string
          description: Application ID
          example: app_default
        tenantId:
          type: string
          description: Tenant ID (null for global role assignments)
          example: org_abc123
        roleId:
          type: string
          description: Role ID
          example: role_admin
        roleName:
          type: string
          description: Role name (denormalized for convenience)
          example: Admin
        isGlobalRole:
          type: boolean
          description: Whether this is a global role assignment
        assignedAt:
          type: string
          format: date-time
          description: When the role was assigned
        assignedBy:
          type: string
          description: Who assigned the role
          example: usr_owner
      description: |-
        User's role assignment

        Represents a single role assigned to a user within a specific
        application and optional tenant context.
    UserRoleAssignmentListResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/UserRoleAssignment'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: User role assignments list response
    UserRoleAssignmentResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/UserRoleAssignment'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: User role assignment response
    ValidateCouponRequest:
      type: object
      required:
        - code
        - planId
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 50
          description: Coupon code to validate
        planId:
          type: string
          description: Plan ID to apply coupon to
          example: plan_basic_monthly
      description: Validate coupon request
    ValidateCouponResponse:
      type: object
      required:
        - valid
      properties:
        valid:
          type: boolean
          description: Whether the coupon is valid
        coupon:
          allOf:
            - $ref: '#/components/schemas/Coupon'
          description: Coupon details (if valid)
        discountAmount:
          type: integer
          format: int32
          description: Calculated discount amount in cents (if applicable)
          example: 10000
        message:
          type: string
          description: Validation message
          example: Coupon is valid. 20% discount applied.
      description: Coupon validation response
    VirusScanStatus:
      type: string
      enum:
        - pending
        - scanning
        - clean
        - infected
        - failed
      description: Virus scan status for uploaded files
    Warning:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Warning code (e.g., endpointDeprecated, pageSizeCapped)
        message:
          type: string
          description: Human-readable warning message
        documentationUrl:
          type: string
          description: URL to documentation about this warning (optional)
      description: |-
        Warning message included in responses for non-fatal issues

        Examples: deprecated endpoints, capped page size, rate limit approaching
    Webhook:
      type: object
      required:
        - id
        - tenantId
        - url
        - events
        - secret
        - isActive
        - consecutiveFailures
        - createdBy
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: 'Unique webhook identifier (format: wh_abc123)'
          example: wh_abc123
        tenantId:
          type: string
          description: Tenant this webhook belongs to
          example: org_xyz789
        url:
          type: string
          description: URL to receive webhook payloads
          example: https://customer.com/webhooks/handler
        name:
          type: string
          description: Human-readable name for this webhook
          example: Production Webhook
        description:
          type: string
          description: Description of what this webhook is used for
        events:
          type: array
          items:
            type: string
          description: Event types to subscribe to (e.g., "user.created", "invoice.paid")
          example:
            - user.created
            - user.updated
            - invoice.paid
        secret:
          type: string
          description: Secret for HMAC-SHA256 signature verification (masked after creation)
          example: whsec_...xyz
        isActive:
          type: boolean
          description: Whether the webhook is currently active
        consecutiveFailures:
          type: integer
          format: int32
          description: Number of consecutive failures (resets on success)
        lastTriggeredAt:
          type: string
          format: date-time
          description: When the webhook was last triggered
        lastSuccessAt:
          type: string
          format: date-time
          description: When the webhook last succeeded
        lastFailureAt:
          type: string
          format: date-time
          description: When the webhook last failed
        createdBy:
          type: string
          description: User who created this webhook
          example: usr_admin123
        createdAt:
          type: string
          format: date-time
          description: When the webhook was created
        updatedAt:
          type: string
          format: date-time
          description: When the webhook was last updated
      description: |-
        Webhook configuration

        Defines an endpoint to receive event notifications.
    WebhookAcknowledgment:
      type: object
      required:
        - received
      properties:
        received:
          type: boolean
          description: Whether webhook was received
        eventId:
          type: string
          description: Event ID (if processed)
        note:
          type: string
          description: Processing note
      description: Webhook received acknowledgment
    WebhookCreatedResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/WebhookWithSecret'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Webhook creation response (includes secret once)
    WebhookDelivery:
      type: object
      required:
        - id
        - webhookId
        - eventId
        - eventType
        - status
        - attemptCount
        - createdAt
      properties:
        id:
          type: string
          description: 'Unique delivery identifier (format: whd_abc123)'
          example: whd_abc123
        webhookId:
          type: string
          description: Webhook ID this delivery belongs to
          example: wh_abc123
        eventId:
          type: string
          description: Event ID that triggered this delivery
          example: wh_evt_xyz789
        eventType:
          type: string
          description: Event type
          example: user.created
        status:
          allOf:
            - $ref: '#/components/schemas/WebhookDeliveryStatus'
          description: Delivery status
        attemptCount:
          type: integer
          format: int32
          description: Number of delivery attempts made
        httpStatus:
          type: integer
          format: int32
          description: HTTP status code from last attempt (null if not yet attempted)
        responseBody:
          type: string
          description: Response body from last attempt (truncated)
        errorMessage:
          type: string
          description: Error message if failed
        durationMs:
          type: integer
          format: int32
          description: Duration of last request in milliseconds
        nextRetryAt:
          type: string
          format: date-time
          description: When the next retry will be attempted
        createdAt:
          type: string
          format: date-time
          description: When this delivery was created
        lastAttemptAt:
          type: string
          format: date-time
          description: When the delivery was last attempted
        completedAt:
          type: string
          format: date-time
          description: When the delivery completed (success or exhausted)
      description: |-
        Webhook delivery attempt record

        Tracks each attempt to deliver a webhook payload.
    WebhookDeliveryConfig:
      type: object
      required:
        - url
      properties:
        url:
          type: string
          description: Webhook URL to POST the result
          example: https://api.example.com/incoming
        headers:
          type: object
          additionalProperties:
            type: string
          description: Custom headers to include
        attachmentMode:
          type: string
          enum:
            - attachment
            - base64
          description: Include result as attachment or inline base64
      description: Webhook delivery configuration
    WebhookDeliveryConfigUpdate:
      type: object
      properties:
        url:
          type: string
          description: Webhook URL to POST the result
          example: https://api.example.com/incoming
        headers:
          type: object
          additionalProperties:
            type: string
          description: Custom headers to include
        attachmentMode:
          type: string
          enum:
            - attachment
            - base64
          description: Include result as attachment or inline base64
      description: Webhook delivery configuration
    WebhookDeliveryListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/WebhookDelivery'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Webhook delivery list response
    WebhookDeliveryResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/WebhookDelivery'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Webhook delivery response
    WebhookDeliveryStatus:
      type: string
      enum:
        - pending
        - delivered
        - failed
        - exhausted
      description: Webhook delivery status
    WebhookEventTypesResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: object
          properties:
            eventTypes:
              type: object
              additionalProperties:
                type: array
                items:
                  type: string
              description: Available event types grouped by resource
          required:
            - eventTypes
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Available webhook event types
    WebhookListResponse:
      type: object
      required:
        - data
        - pagination
        - meta
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Webhook'
        pagination:
          $ref: '#/components/schemas/Pagination'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Webhook list response
    WebhookResponse:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          $ref: '#/components/schemas/Webhook'
        meta:
          $ref: '#/components/schemas/ResponseMeta'
      description: Webhook response (secret masked)
    WebhookWithSecret:
      type: object
      required:
        - id
        - tenantId
        - url
        - events
        - secret
        - isActive
        - createdAt
      properties:
        id:
          type: string
          description: Unique webhook identifier
          example: wh_abc123
        tenantId:
          type: string
          description: Tenant this webhook belongs to
        url:
          type: string
          description: URL to receive webhook payloads
        name:
          type: string
          description: Webhook name
        events:
          type: array
          items:
            type: string
          description: Event types subscribed to
        secret:
          type: string
          description: |-
            The webhook secret - ONLY RETURNED ONCE
            Use this for signature verification
          example: whsec_abc123xyz789_secret
        isActive:
          type: boolean
          description: Whether the webhook is active
        createdAt:
          type: string
          format: date-time
          description: When the webhook was created
      description: Webhook with unmasked secret (only returned on creation)
servers:
  - url: https://api.example.com
    description: Production server
    variables: {}
  - url: http://localhost:3001
    description: Development server
    variables: {}
